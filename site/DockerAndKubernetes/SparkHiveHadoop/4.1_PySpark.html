
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://dwdas9.github.io/home/DockerAndKubernetes/SparkHiveHadoop/4.1_PySpark.html">
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.4">
    
    
      
        <title>PySpark - Das Digital Digest</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.8608ea7d.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
        <script src="https://unpkg.com/iframe-worker/shim"></script>
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#ubuntu-python-openjdk-pyspark" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../index.html" title="Das Digital Digest" class="md-header__button md-logo" aria-label="Das Digital Digest" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Das Digital Digest
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              PySpark
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../index.html" title="Das Digital Digest" class="md-nav__button md-logo" aria-label="Das Digital Digest" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Das Digital Digest
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Data Engineering & Analytics
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Data Engineering & Analytics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Apache Airflow
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            Apache Airflow
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Airflow/index.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Airflow/1.0.0_AirFlow_Concepts.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Concepts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Airflow/1.0.1_A_Dags_Anatomy.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DAG Anatomy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Airflow/1.0.2_Hello_Airflow.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hello Airflow
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Airflow/1.0.3_Airflow_Dbt_Docker.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Airflow DBT Docker
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Spark & Databricks
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Spark & Databricks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Spark-DataBricks/index.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Spark-DataBricks/basics.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Basic Concepts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Spark-DataBricks/advanced.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Advanced Topics
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Stream Processing
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Stream Processing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../StreamProcessing/index.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    SQL
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            SQL
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../SQL/index.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../SQL/best-practices.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Best Practices
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../SQL/performance-tuning.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Performance Tuning
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Cloud & DevOps
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Cloud & DevOps
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Microsoft Fabric
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            Microsoft Fabric
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Microsoft-Fabric/index.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Azure Services
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Azure Services
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Synapse-ADF/synapse.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Synapse Analytics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Synapse-ADF/adf.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data Factory
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    DevOps
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            DevOps
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_3_1" id="__nav_3_3_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    GitHub Actions
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3_1">
            <span class="md-nav__icon md-icon"></span>
            GitHub Actions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../DevOps/1_GitHub-Concepts.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Concepts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../DevOps/1.1_Hello_GitHub_Actions_Workflow.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hello GitHub Actions
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_3_2" id="__nav_3_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Azure DevOps
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3_2">
            <span class="md-nav__icon md-icon"></span>
            Azure DevOps
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../DevOps/2_Azure-Pipelines.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Pipelines
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../DevOps/ADF_CICD.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ADF CI/CD
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Containers
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Containers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4_1" >
        
          
          <label class="md-nav__link" for="__nav_3_4_1" id="__nav_3_4_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Docker
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4_1">
            <span class="md-nav__icon md-icon"></span>
            Docker
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AirflowDocker/1_AirflowDocker.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Airflow on Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="4.9_DockerConcepts.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Concepts
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../kubernetes/index.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kubernetes
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Enterprise Solutions
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Enterprise Solutions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Microsoft 365
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            Microsoft 365
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../M365/index.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../M365/sharepoint.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SharePoint
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Power Platform
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Power Platform
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../PowerPlatform/index.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../PowerPlatform/powerbi.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Power BI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../PowerPlatform/automate.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Power Automate
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    MongoDB
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            MongoDB
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../MongoDB/index.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../MongoDB/best-practices.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Best Practices
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Python
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            Python
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Python/index.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Python/data-processing.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data Processing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Python/automation.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Automation
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Projects
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Projects
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" >
        
          
          <label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Data Engineering
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1">
            <span class="md-nav__icon md-icon"></span>
            Data Engineering
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../DE-Projects/AzureSkyWeather/index.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Sky Weather
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../DE-Projects/CurrencyPredictor.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Currency Predictor
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../DE-Projects/JsonValidator/index.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JSON Validator
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1_4" >
        
          
          <label class="md-nav__link" for="__nav_5_1_4" id="__nav_5_1_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ETL Projects
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1_4">
            <span class="md-nav__icon md-icon"></span>
            ETL Projects
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../DE-Projects/Csv-To-MSSQL.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CSV to MSSQL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../DE-Projects/FetchJsonWriteParquet.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JSON to Parquet
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../DE-Projects/Dbrk-E2E-AttritionProject.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Databricks E2E Project
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Resources
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Resources
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Misc/6_RunningAppsInBg.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Miscellaneous
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#for-busy-people" class="md-nav__link">
    <span class="md-ellipsis">
      For Busy People
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#steps-to-create-the-image-and-container" class="md-nav__link">
    <span class="md-ellipsis">
      Steps to Create the Image and Container
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Steps to Create the Image and Container">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-the-dockerfile" class="md-nav__link">
    <span class="md-ellipsis">
      Create the Dockerfile
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-the-image" class="md-nav__link">
    <span class="md-ellipsis">
      Build the Image
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-the-docker-container" class="md-nav__link">
    <span class="md-ellipsis">
      Run the Docker Container
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#details-of-the-container" class="md-nav__link">
    <span class="md-ellipsis">
      Details of the container
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Details of the container">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#error-package-not-found-404-not-found" class="md-nav__link">
    <span class="md-ellipsis">
      Error: Package Not Found (404 Not Found)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<details open markdown="block">
  <summary>
    Table of contents
  </summary>
  {: .text-delta }
1. TOC
{:toc}
</details>

<h1 id="ubuntu-python-openjdk-pyspark"><span style="font-family: 'Segoe UI', sans-serif; letter-spacing: 1px;color: #AD49B3;"><strong>Ubuntu, Python, OpenJDK &amp; PySpark</strong></span><a class="headerlink" href="#ubuntu-python-openjdk-pyspark" title="Permanent link">&para;</a></h1>
<p>In this article I will show you how to create Docker containers with Pyspark and Spark components.</p>
<h2 id="for-busy-people"><span style="color: #682A6E; font-family: Segoe UI, sans-serif;letter-spacing: 1px;">For Busy People</span><a class="headerlink" href="#for-busy-people" title="Permanent link">&para;</a></h2>
<ol>
<li>Save the <a href="#dockerfile">Dockerfile</a> content as <code>Dockerfile</code> (no extension).</li>
<li><code>cd</code> to the folder containtng  the Dockerfile</li>
<li><strong>Run Commands</strong>:
   <div class="language-sh highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>ubuntu-pyspark<span class="w"> </span>.
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--name<span class="w"> </span>Ubuntu-PySpark<span class="w"> </span>--network<span class="w"> </span>dasnet<span class="w"> </span>ubuntu-pyspark
</span></code></pre></div></li>
</ol>
<p>That’s it!</p>
<h2 id="steps-to-create-the-image-and-container"><span style="color: #682A6E; font-family: Segoe UI, sans-serif;letter-spacing: 1px;">Steps to Create the Image and Container</span><a class="headerlink" href="#steps-to-create-the-image-and-container" title="Permanent link">&para;</a></h2>
<p>In this article I will show you how to create a single container with Ubuntu OS, Python and PySpark. We will use just a dockerfile to create it.</p>
<p>Follow the steps below to create the container.</p>
<h3 id="create-the-dockerfile"><span style="color: #682A6E; font-family: Segoe UI, sans-serif;letter-spacing: 1px;">Create the Dockerfile</span><a class="headerlink" href="#create-the-dockerfile" title="Permanent link">&para;</a></h3>
<p>In a folder create a file <strong>Dockerfile</strong>(No extension) with the content below.</p>
<details open markdown="block">
  <summary>
   Dockerfile
  </summary>

<div class="language-Dockerfile highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c"># Use Ubuntu 20.04 as the base image to avoid &quot;externally-managed-environment&quot; restrictions</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="k">FROM</span><span class="w"> </span><span class="s">ubuntu:20.04</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="c"># Set environment variable to avoid interactive prompts during package installation</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="k">ENV</span><span class="w"> </span><span class="nv">DEBIAN_FRONTEND</span><span class="o">=</span>noninteractive
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="c"># Update the package list to ensure we have the latest information about available packages</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="k">RUN</span><span class="w"> </span>apt-get<span class="w"> </span>update
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="c"># Install necessary packages including curl, sudo, and nano</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="k">RUN</span><span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>curl<span class="w"> </span>sudo<span class="w"> </span>nano<span class="w"> </span>software-properties-common
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="c"># Add the &#39;deadsnakes&#39; PPA (Personal Package Archive) to access newer Python versions</span>
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="k">RUN</span><span class="w"> </span>add-apt-repository<span class="w"> </span>ppa:deadsnakes/ppa
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="c"># Add the OpenJDK PPA to get the latest JDK versions</span>
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a><span class="k">RUN</span><span class="w"> </span>add-apt-repository<span class="w"> </span>ppa:openjdk-r/ppa
</span><span id="__span-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>
</span><span id="__span-1-19"><a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a><span class="c"># Update the package list again to include the new PPAs</span>
</span><span id="__span-1-20"><a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a><span class="k">RUN</span><span class="w"> </span>apt-get<span class="w"> </span>update
</span><span id="__span-1-21"><a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a>
</span><span id="__span-1-22"><a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a><span class="c"># Install Python 3.12, pip, and OpenJDK 17</span>
</span><span id="__span-1-23"><a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a><span class="k">RUN</span><span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>python3.12<span class="w"> </span>python3-pip<span class="w"> </span>openjdk-17-jdk-headless
</span><span id="__span-1-24"><a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a>
</span><span id="__span-1-25"><a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a><span class="c"># Install the PySpark library using pip</span>
</span><span id="__span-1-26"><a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a><span class="k">RUN</span><span class="w"> </span>pip3<span class="w"> </span>install<span class="w"> </span>pyspark
</span><span id="__span-1-27"><a id="__codelineno-1-27" name="__codelineno-1-27" href="#__codelineno-1-27"></a>
</span><span id="__span-1-28"><a id="__codelineno-1-28" name="__codelineno-1-28" href="#__codelineno-1-28"></a><span class="c"># Clean up the package lists to reduce the image size</span>
</span><span id="__span-1-29"><a id="__codelineno-1-29" name="__codelineno-1-29" href="#__codelineno-1-29"></a><span class="k">RUN</span><span class="w"> </span>apt-get<span class="w"> </span>clean<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span>/var/lib/apt/lists/*
</span><span id="__span-1-30"><a id="__codelineno-1-30" name="__codelineno-1-30" href="#__codelineno-1-30"></a>
</span><span id="__span-1-31"><a id="__codelineno-1-31" name="__codelineno-1-31" href="#__codelineno-1-31"></a><span class="c"># Create a root user and set its password</span>
</span><span id="__span-1-32"><a id="__codelineno-1-32" name="__codelineno-1-32" href="#__codelineno-1-32"></a><span class="k">RUN</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;root:Passw0rd&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>chpasswd
</span><span id="__span-1-33"><a id="__codelineno-1-33" name="__codelineno-1-33" href="#__codelineno-1-33"></a>
</span><span id="__span-1-34"><a id="__codelineno-1-34" name="__codelineno-1-34" href="#__codelineno-1-34"></a><span class="c"># Create a new user &#39;dwdas&#39;, set a password, and add this user to the sudo group</span>
</span><span id="__span-1-35"><a id="__codelineno-1-35" name="__codelineno-1-35" href="#__codelineno-1-35"></a><span class="k">RUN</span><span class="w"> </span>useradd<span class="w"> </span>-ms<span class="w"> </span>/bin/bash<span class="w"> </span>dwdas<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;dwdas:Passw0rd&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>chpasswd<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>adduser<span class="w"> </span>dwdas<span class="w"> </span>sudo
</span><span id="__span-1-36"><a id="__codelineno-1-36" name="__codelineno-1-36" href="#__codelineno-1-36"></a>
</span><span id="__span-1-37"><a id="__codelineno-1-37" name="__codelineno-1-37" href="#__codelineno-1-37"></a><span class="c"># Allow the &#39;dwdas&#39; user to run sudo commands without a password</span>
</span><span id="__span-1-38"><a id="__codelineno-1-38" name="__codelineno-1-38" href="#__codelineno-1-38"></a><span class="k">RUN</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;dwdas ALL=(ALL) NOPASSWD:ALL&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>/etc/sudoers
</span><span id="__span-1-39"><a id="__codelineno-1-39" name="__codelineno-1-39" href="#__codelineno-1-39"></a>
</span><span id="__span-1-40"><a id="__codelineno-1-40" name="__codelineno-1-40" href="#__codelineno-1-40"></a><span class="c"># Set the working directory to the home directory of the new user</span>
</span><span id="__span-1-41"><a id="__codelineno-1-41" name="__codelineno-1-41" href="#__codelineno-1-41"></a><span class="k">WORKDIR</span><span class="w"> </span><span class="s">/home/dwdas</span>
</span><span id="__span-1-42"><a id="__codelineno-1-42" name="__codelineno-1-42" href="#__codelineno-1-42"></a>
</span><span id="__span-1-43"><a id="__codelineno-1-43" name="__codelineno-1-43" href="#__codelineno-1-43"></a><span class="c"># Switch to the new user &#39;dwdas&#39;</span>
</span><span id="__span-1-44"><a id="__codelineno-1-44" name="__codelineno-1-44" href="#__codelineno-1-44"></a><span class="k">USER</span><span class="w"> </span><span class="s">dwdas</span>
</span><span id="__span-1-45"><a id="__codelineno-1-45" name="__codelineno-1-45" href="#__codelineno-1-45"></a>
</span><span id="__span-1-46"><a id="__codelineno-1-46" name="__codelineno-1-46" href="#__codelineno-1-46"></a><span class="c"># Expose port 8888, commonly used for Jupyter Notebook, if needed</span>
</span><span id="__span-1-47"><a id="__codelineno-1-47" name="__codelineno-1-47" href="#__codelineno-1-47"></a><span class="k">EXPOSE</span><span class="w"> </span><span class="s">8888</span>
</span><span id="__span-1-48"><a id="__codelineno-1-48" name="__codelineno-1-48" href="#__codelineno-1-48"></a>
</span><span id="__span-1-49"><a id="__codelineno-1-49" name="__codelineno-1-49" href="#__codelineno-1-49"></a><span class="c"># Set the default command to start a bash shell</span>
</span><span id="__span-1-50"><a id="__codelineno-1-50" name="__codelineno-1-50" href="#__codelineno-1-50"></a><span class="k">CMD</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;bash&quot;</span><span class="p">]</span>
</span></code></pre></div>
</details>

<h3 id="build-the-image"><span style="color: #682A6E; font-family: Segoe UI, sans-serif;letter-spacing: 1px;">Build the Image</span><a class="headerlink" href="#build-the-image" title="Permanent link">&para;</a></h3>
<p>Open CMD, navigate to the folder with the Dockerfile, and run:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>ubuntu-pyspark-img<span class="w"> </span>.
</span></code></pre></div>
<p>After successfully running the command, you will see an image in your Docker Desktop app:</p>
<h3 id="run-the-docker-container"><span style="color: #682A6E; font-family: Segoe UI, sans-serif;letter-spacing: 1px;">Run the Docker Container</span><a class="headerlink" href="#run-the-docker-container" title="Permanent link">&para;</a></h3>
<p>In command prompt, run:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--name<span class="w"> </span>Debian-PySpark<span class="w"> </span>--network<span class="w"> </span>dasnet<span class="w"> </span>debian-pyspark
</span></code></pre></div>
<p>This will create a container with the image we created earlier and start it. You can see it from the Container section of your Docker window.</p>
<p><img src="images/2024-09-05-21-09-01.png" style="
    border: 2px solid gray;
    border-radius: 6px;
    box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
    margin: 20px;
    padding: 1px;
    width: Auto; /* Maintain aspect ratio */
    height: Auto; /* Maintain aspect ratio */
   "/></p>
<h2 id="details-of-the-container"><span style="color: #682A6E; font-family: Segoe UI, sans-serif;letter-spacing: 1px;">Details of the container</span><a class="headerlink" href="#details-of-the-container" title="Permanent link">&para;</a></h2>
<p>Here are the details of the installed components. The table will be a handy reference to know which components are installed and important locations, variables etc.</p>
<table>
<thead>
<tr>
<th><strong>Component</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Base Image</strong></td>
<td><code>ubuntu:20.04</code></td>
</tr>
<tr>
<td><strong>Python Version</strong></td>
<td>Python 3.12, installed via the <code>deadsnakes</code> PPA</td>
</tr>
<tr>
<td><strong>Java Version</strong></td>
<td>OpenJDK 17 (Headless), installed via the <code>openjdk-r</code> PPA</td>
</tr>
<tr>
<td><strong>PySpark Version</strong></td>
<td>Latest version of PySpark installed via pip</td>
</tr>
<tr>
<td><strong>Home Directory for User</strong></td>
<td><code>/home/dwdas</code></td>
</tr>
<tr>
<td><strong>Spark Home</strong></td>
<td><code>/opt/bitnami/spark</code></td>
</tr>
<tr>
<td><strong>Java Home</strong></td>
<td><code>/opt/bitnami/java</code></td>
</tr>
<tr>
<td><strong>Python Path</strong></td>
<td><code>/opt/bitnami/spark/python/</code> (for PySpark integration)</td>
</tr>
<tr>
<td><strong>Spark Configuration Directory</strong></td>
<td><code>/opt/bitnami/spark/conf</code></td>
</tr>
<tr>
<td><strong>Spark Worker Directory</strong></td>
<td><code>/opt/bitnami/spark/work</code></td>
</tr>
<tr>
<td><strong>Environment Variables</strong></td>
<td><code>DEBIAN_FRONTEND=noninteractive</code> to avoid interactive prompts during installation</td>
</tr>
<tr>
<td><strong>User Created</strong></td>
<td><code>dwdas</code> with sudo privileges and passwordless sudo access</td>
</tr>
<tr>
<td><strong>Exposed Port</strong></td>
<td>Port <code>8888</code>, commonly used for Jupyter Notebooks</td>
</tr>
<tr>
<td><strong>Default Command</strong></td>
<td><code>bash</code> shell set as the default command</td>
</tr>
<tr>
<td><strong>Network Configuration</strong></td>
<td>Connected to the <code>dasnet</code> network</td>
</tr>
<tr>
<td><strong>Spark Ports</strong></td>
<td>Spark Master: <code>7077</code> (mapped to host port <code>17077</code>), Spark Master UI: <code>8080</code> (mapped to host port <code>16080</code>), Spark Worker UI: <code>8081</code> (mapped to host port <code>16002</code>), <code>8082</code> (mapped to host port <code>16004</code>)</td>
</tr>
</tbody>
</table>
<h3 id="error-package-not-found-404-not-found"><span style="color: #682A6E; font-family: Segoe UI, sans-serif;letter-spacing: 1px;">Error: Package Not Found (404 Not Found)</span><a class="headerlink" href="#error-package-not-found-404-not-found" title="Permanent link">&para;</a></h3>
<p>When building the Docker image, I got a <code>404 Not Found</code> error because some packages like <code>python3.12</code> and <code>openjdk-17-jdk-headless</code> couldn't be found. This usually happens if the package lists are outdated or there's an issue with the repositories. Here's how to fix it:</p>
<ol>
<li>
<p><strong>Update Package Lists</strong>: Run <code>apt-get update</code> first to make sure your package lists are current.</p>
</li>
<li>
<p><strong>Add Correct PPAs</strong>: Update the Dockerfile to include these PPAs:</p>
</li>
<li><code>deadsnakes</code> for Python.</li>
<li>
<p><code>openjdk-r</code> for OpenJDK.</p>
</li>
<li>
<p><strong>Use <code>--fix-missing</code> Option</strong>: If the problem continues, try <code>apt-get install --fix-missing</code> to fix missing packages.</p>
</li>
<li>
<p><strong>Install Specific Versions</strong>: If the latest version isn't available, try installing a slightly older but stable version.</p>
</li>
</ol>
<h1 id="debian-downloaded-python-pyspark-no-venv"><span style="font-family: 'Segoe UI', sans-serif; letter-spacing: 1px;color: #1434CB;"><strong>Debian, Downloaded Python, Pyspark - no venv.</strong></span><a class="headerlink" href="#debian-downloaded-python-pyspark-no-venv" title="Permanent link">&para;</a></h1>
<p>This Section shows you how to create a Docker container with the latest Debian, Python 3.11, OpenJDK 17, and PySpark. We’ll set up a root user and a named user with essential environment variables.</p>
<p>Note: If you install python using  apt-get install in new Debain it will ask you to install in venv mode. We want to avoid this. Hence we download it(weget) then intstall it manually.</p>
<p>We’ll use a Dockerfile and docker-compose.yml for the setup.</p>
<h2 id="steps-to-create-the-image-and-container_1"><span style="font-family: 'Segoe UI', sans-serif; letter-spacing: 1px;color: #485BDA;">Steps to Create the Image and Container</span><a class="headerlink" href="#steps-to-create-the-image-and-container_1" title="Permanent link">&para;</a></h2>
<h3 id="create-a-dockerfile"><span style="font-family: 'Segoe UI', sans-serif; letter-spacing: 1px;color: #485BDA;">Create a Dockerfile:</span><a class="headerlink" href="#create-a-dockerfile" title="Permanent link">&para;</a></h3>
<p>Create a <strong>Dockerfile.txt</strong> with the contents below and <strong>remove the .txt</strong> extension</p>
<details open markdown="block">
  <summary>
   Dockerfile
  </summary>

<div class="language-dockerfile highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="w">  </span>#<span class="w"> </span>Use<span class="w"> </span>Debian<span class="w"> </span>as<span class="w"> </span>the<span class="w"> </span>base<span class="w"> </span>image
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="w">  </span>FROM<span class="w"> </span>debian:latest
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">  </span>#<span class="w"> </span>Set<span class="w"> </span>environment<span class="w"> </span>variable<span class="w"> </span>to<span class="w"> </span>avoid<span class="w"> </span>interactive<span class="w"> </span>prompts<span class="w"> </span>during<span class="w"> </span>package<span class="w"> </span>installation
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="w">  </span>ENV<span class="w"> </span><span class="nv">DEBIAN_FRONTEND</span><span class="o">=</span>noninteractive
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="w">  </span>#<span class="w"> </span>Update<span class="w"> </span>the<span class="w"> </span>package<span class="w"> </span>lists<span class="w"> </span>and<span class="w"> </span>install<span class="w"> </span>essential<span class="w"> </span>packages
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="w">  </span>RUN<span class="w"> </span>apt-get<span class="w"> </span>update<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>--no-install-recommends<span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="w">    </span>curl<span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="w">    </span>wget<span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="w">    </span>tar<span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="w">    </span>bash<span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-13"><a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a><span class="w">    </span>ca-certificates<span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-14"><a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a><span class="w">    </span>sudo<span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-15"><a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a><span class="w">    </span>build-essential<span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-16"><a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a><span class="w">    </span>libssl-dev<span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-17"><a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a><span class="w">    </span>zlib1g-dev<span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-18"><a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a><span class="w">    </span>libbz2-dev<span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-19"><a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a><span class="w">    </span>libreadline-dev<span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-20"><a id="__codelineno-4-20" name="__codelineno-4-20" href="#__codelineno-4-20"></a><span class="w">    </span>libsqlite3-dev<span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-21"><a id="__codelineno-4-21" name="__codelineno-4-21" href="#__codelineno-4-21"></a><span class="w">    </span>libffi-dev
</span><span id="__span-4-22"><a id="__codelineno-4-22" name="__codelineno-4-22" href="#__codelineno-4-22"></a>
</span><span id="__span-4-23"><a id="__codelineno-4-23" name="__codelineno-4-23" href="#__codelineno-4-23"></a><span class="w">  </span>#<span class="w"> </span>Copy<span class="w"> </span>the<span class="w"> </span>Python<span class="w"> </span><span class="nb">source</span><span class="w"> </span>tarball<span class="w"> </span>into<span class="w"> </span>the<span class="w"> </span>image
</span><span id="__span-4-24"><a id="__codelineno-4-24" name="__codelineno-4-24" href="#__codelineno-4-24"></a><span class="w">  </span>COPY<span class="w"> </span>Python-3.11.9.tgz<span class="w"> </span>/tmp/
</span><span id="__span-4-25"><a id="__codelineno-4-25" name="__codelineno-4-25" href="#__codelineno-4-25"></a>
</span><span id="__span-4-26"><a id="__codelineno-4-26" name="__codelineno-4-26" href="#__codelineno-4-26"></a><span class="w">  </span>#<span class="w"> </span>Extract,<span class="w"> </span>build,<span class="w"> </span>and<span class="w"> </span>install<span class="w"> </span>Python<span class="w"> </span><span class="m">3</span>.11.9
</span><span id="__span-4-27"><a id="__codelineno-4-27" name="__codelineno-4-27" href="#__codelineno-4-27"></a><span class="w">  </span>RUN<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>/tmp<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-28"><a id="__codelineno-4-28" name="__codelineno-4-28" href="#__codelineno-4-28"></a><span class="w">      </span>tar<span class="w"> </span>-xvf<span class="w"> </span>Python-3.11.9.tgz<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-29"><a id="__codelineno-4-29" name="__codelineno-4-29" href="#__codelineno-4-29"></a><span class="w">      </span><span class="nb">cd</span><span class="w"> </span>Python-3.11.9<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-30"><a id="__codelineno-4-30" name="__codelineno-4-30" href="#__codelineno-4-30"></a><span class="w">      </span>./configure<span class="w"> </span>--enable-optimizations<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-31"><a id="__codelineno-4-31" name="__codelineno-4-31" href="#__codelineno-4-31"></a><span class="w">      </span>make<span class="w"> </span>-j<span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-32"><a id="__codelineno-4-32" name="__codelineno-4-32" href="#__codelineno-4-32"></a><span class="w">      </span>make<span class="w"> </span>altinstall<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-33"><a id="__codelineno-4-33" name="__codelineno-4-33" href="#__codelineno-4-33"></a><span class="w">      </span><span class="nb">cd</span><span class="w"> </span>..<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-34"><a id="__codelineno-4-34" name="__codelineno-4-34" href="#__codelineno-4-34"></a><span class="w">      </span>rm<span class="w"> </span>-rf<span class="w"> </span>Python-3.11.9<span class="w"> </span>Python-3.11.9.tgz
</span><span id="__span-4-35"><a id="__codelineno-4-35" name="__codelineno-4-35" href="#__codelineno-4-35"></a>
</span><span id="__span-4-36"><a id="__codelineno-4-36" name="__codelineno-4-36" href="#__codelineno-4-36"></a><span class="w">  </span>#<span class="w"> </span>Create<span class="w"> </span>symbolic<span class="w"> </span>links<span class="w"> </span><span class="k">for</span><span class="w"> </span>python,<span class="w"> </span>python3,<span class="w"> </span>pip,<span class="w"> </span>and<span class="w"> </span>pip3
</span><span id="__span-4-37"><a id="__codelineno-4-37" name="__codelineno-4-37" href="#__codelineno-4-37"></a><span class="w">  </span>RUN<span class="w"> </span>ln<span class="w"> </span>-s<span class="w"> </span>/usr/local/bin/python3.11<span class="w"> </span>/usr/bin/python<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-38"><a id="__codelineno-4-38" name="__codelineno-4-38" href="#__codelineno-4-38"></a><span class="w">      </span>ln<span class="w"> </span>-s<span class="w"> </span>/usr/local/bin/python3.11<span class="w"> </span>/usr/bin/python3<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-39"><a id="__codelineno-4-39" name="__codelineno-4-39" href="#__codelineno-4-39"></a><span class="w">      </span>ln<span class="w"> </span>-s<span class="w"> </span>/usr/local/bin/pip3.11<span class="w"> </span>/usr/bin/pip<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-40"><a id="__codelineno-4-40" name="__codelineno-4-40" href="#__codelineno-4-40"></a><span class="w">      </span>ln<span class="w"> </span>-s<span class="w"> </span>/usr/local/bin/pip3.11<span class="w"> </span>/usr/bin/pip3
</span><span id="__span-4-41"><a id="__codelineno-4-41" name="__codelineno-4-41" href="#__codelineno-4-41"></a>
</span><span id="__span-4-42"><a id="__codelineno-4-42" name="__codelineno-4-42" href="#__codelineno-4-42"></a><span class="w">  </span>#<span class="w"> </span>Install<span class="w"> </span>OpenJDK<span class="w"> </span><span class="m">17</span>
</span><span id="__span-4-43"><a id="__codelineno-4-43" name="__codelineno-4-43" href="#__codelineno-4-43"></a><span class="w">  </span>RUN<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>openjdk-17-jdk-headless
</span><span id="__span-4-44"><a id="__codelineno-4-44" name="__codelineno-4-44" href="#__codelineno-4-44"></a>
</span><span id="__span-4-45"><a id="__codelineno-4-45" name="__codelineno-4-45" href="#__codelineno-4-45"></a><span class="w">  </span>#<span class="w"> </span>Install<span class="w"> </span>the<span class="w"> </span>PySpark<span class="w"> </span>library<span class="w"> </span>using<span class="w"> </span>pip
</span><span id="__span-4-46"><a id="__codelineno-4-46" name="__codelineno-4-46" href="#__codelineno-4-46"></a><span class="w">  </span>RUN<span class="w"> </span>python3.11<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>pyspark
</span><span id="__span-4-47"><a id="__codelineno-4-47" name="__codelineno-4-47" href="#__codelineno-4-47"></a>
</span><span id="__span-4-48"><a id="__codelineno-4-48" name="__codelineno-4-48" href="#__codelineno-4-48"></a><span class="w">  </span>#<span class="w"> </span>Set<span class="w"> </span>environment<span class="w"> </span>variables
</span><span id="__span-4-49"><a id="__codelineno-4-49" name="__codelineno-4-49" href="#__codelineno-4-49"></a><span class="w">  </span>ENV<span class="w"> </span><span class="nv">JAVA_HOME</span><span class="o">=</span>/usr/lib/jvm/java-17-openjdk-amd64
</span><span id="__span-4-50"><a id="__codelineno-4-50" name="__codelineno-4-50" href="#__codelineno-4-50"></a><span class="w">  </span>ENV<span class="w"> </span><span class="nv">PYTHONPATH</span><span class="o">=</span>/usr/local/lib/python3.11/dist-packages
</span><span id="__span-4-51"><a id="__codelineno-4-51" name="__codelineno-4-51" href="#__codelineno-4-51"></a><span class="w">  </span>ENV<span class="w"> </span><span class="nv">PYSPARK_PYTHON</span><span class="o">=</span>/usr/local/bin/python3.11
</span><span id="__span-4-52"><a id="__codelineno-4-52" name="__codelineno-4-52" href="#__codelineno-4-52"></a><span class="w">  </span>ENV<span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:<span class="nv">$JAVA_HOME</span>/bin
</span><span id="__span-4-53"><a id="__codelineno-4-53" name="__codelineno-4-53" href="#__codelineno-4-53"></a>
</span><span id="__span-4-54"><a id="__codelineno-4-54" name="__codelineno-4-54" href="#__codelineno-4-54"></a><span class="w">  </span>#<span class="w"> </span>Clean<span class="w"> </span>up<span class="w"> </span>the<span class="w"> </span>package<span class="w"> </span>lists<span class="w"> </span>to<span class="w"> </span>reduce<span class="w"> </span>the<span class="w"> </span>image<span class="w"> </span>size
</span><span id="__span-4-55"><a id="__codelineno-4-55" name="__codelineno-4-55" href="#__codelineno-4-55"></a><span class="w">  </span>RUN<span class="w"> </span>apt-get<span class="w"> </span>clean<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span>/var/lib/apt/lists/*
</span><span id="__span-4-56"><a id="__codelineno-4-56" name="__codelineno-4-56" href="#__codelineno-4-56"></a>
</span><span id="__span-4-57"><a id="__codelineno-4-57" name="__codelineno-4-57" href="#__codelineno-4-57"></a><span class="w">  </span>#<span class="w"> </span>Create<span class="w"> </span>a<span class="w"> </span>root<span class="w"> </span>user<span class="w"> </span>and<span class="w"> </span><span class="nb">set</span><span class="w"> </span>its<span class="w"> </span>password
</span><span id="__span-4-58"><a id="__codelineno-4-58" name="__codelineno-4-58" href="#__codelineno-4-58"></a><span class="w">  </span>RUN<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;root:Passw0rd&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>chpasswd
</span><span id="__span-4-59"><a id="__codelineno-4-59" name="__codelineno-4-59" href="#__codelineno-4-59"></a>
</span><span id="__span-4-60"><a id="__codelineno-4-60" name="__codelineno-4-60" href="#__codelineno-4-60"></a><span class="w">  </span>#<span class="w"> </span>Create<span class="w"> </span>a<span class="w"> </span>new<span class="w"> </span>user<span class="w"> </span><span class="s1">&#39;dwdas&#39;</span>,<span class="w"> </span><span class="nb">set</span><span class="w"> </span>a<span class="w"> </span>password,<span class="w"> </span>and<span class="w"> </span>add<span class="w"> </span>this<span class="w"> </span>user<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>sudo<span class="w"> </span>group
</span><span id="__span-4-61"><a id="__codelineno-4-61" name="__codelineno-4-61" href="#__codelineno-4-61"></a><span class="w">  </span>RUN<span class="w"> </span>useradd<span class="w"> </span>-ms<span class="w"> </span>/bin/bash<span class="w"> </span>dwdas<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;dwdas:Passw0rd&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>chpasswd<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>adduser<span class="w"> </span>dwdas<span class="w"> </span>sudo
</span><span id="__span-4-62"><a id="__codelineno-4-62" name="__codelineno-4-62" href="#__codelineno-4-62"></a>
</span><span id="__span-4-63"><a id="__codelineno-4-63" name="__codelineno-4-63" href="#__codelineno-4-63"></a><span class="w">  </span>#<span class="w"> </span>Allow<span class="w"> </span>the<span class="w"> </span><span class="s1">&#39;dwdas&#39;</span><span class="w"> </span>user<span class="w"> </span>to<span class="w"> </span>run<span class="w"> </span>sudo<span class="w"> </span>commands<span class="w"> </span>without<span class="w"> </span>a<span class="w"> </span>password
</span><span id="__span-4-64"><a id="__codelineno-4-64" name="__codelineno-4-64" href="#__codelineno-4-64"></a><span class="w">  </span>RUN<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;dwdas ALL=(ALL) NOPASSWD:ALL&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>/etc/sudoers
</span><span id="__span-4-65"><a id="__codelineno-4-65" name="__codelineno-4-65" href="#__codelineno-4-65"></a>
</span><span id="__span-4-66"><a id="__codelineno-4-66" name="__codelineno-4-66" href="#__codelineno-4-66"></a><span class="w">  </span>#<span class="w"> </span>Set<span class="w"> </span>the<span class="w"> </span>working<span class="w"> </span>directory<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>home<span class="w"> </span>directory<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>new<span class="w"> </span>user
</span><span id="__span-4-67"><a id="__codelineno-4-67" name="__codelineno-4-67" href="#__codelineno-4-67"></a><span class="w">  </span>WORKDIR<span class="w"> </span>/home/dwdas
</span><span id="__span-4-68"><a id="__codelineno-4-68" name="__codelineno-4-68" href="#__codelineno-4-68"></a>
</span><span id="__span-4-69"><a id="__codelineno-4-69" name="__codelineno-4-69" href="#__codelineno-4-69"></a><span class="w">  </span>#<span class="w"> </span>Switch<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>new<span class="w"> </span>user<span class="w"> </span><span class="s1">&#39;dwdas&#39;</span>
</span><span id="__span-4-70"><a id="__codelineno-4-70" name="__codelineno-4-70" href="#__codelineno-4-70"></a><span class="w">  </span>USER<span class="w"> </span>dwdas
</span><span id="__span-4-71"><a id="__codelineno-4-71" name="__codelineno-4-71" href="#__codelineno-4-71"></a>
</span><span id="__span-4-72"><a id="__codelineno-4-72" name="__codelineno-4-72" href="#__codelineno-4-72"></a><span class="w">  </span>#<span class="w"> </span>Expose<span class="w"> </span>port<span class="w"> </span><span class="m">8888</span>,<span class="w"> </span>commonly<span class="w"> </span>used<span class="w"> </span><span class="k">for</span><span class="w"> </span>Jupyter<span class="w"> </span>Notebook,<span class="w"> </span><span class="k">if</span><span class="w"> </span>needed
</span><span id="__span-4-73"><a id="__codelineno-4-73" name="__codelineno-4-73" href="#__codelineno-4-73"></a><span class="w">  </span>EXPOSE<span class="w"> </span><span class="m">8888</span>
</span><span id="__span-4-74"><a id="__codelineno-4-74" name="__codelineno-4-74" href="#__codelineno-4-74"></a>
</span><span id="__span-4-75"><a id="__codelineno-4-75" name="__codelineno-4-75" href="#__codelineno-4-75"></a><span class="w">  </span>#<span class="w"> </span>Set<span class="w"> </span>the<span class="w"> </span>default<span class="w"> </span><span class="nb">command</span><span class="w"> </span>to<span class="w"> </span>start<span class="w"> </span>a<span class="w"> </span>bash<span class="w"> </span>shell
</span><span id="__span-4-76"><a id="__codelineno-4-76" name="__codelineno-4-76" href="#__codelineno-4-76"></a><span class="w">  </span>CMD<span class="w"> </span><span class="o">[</span><span class="s2">&quot;bash&quot;</span><span class="o">]</span>
</span><span id="__span-4-77"><a id="__codelineno-4-77" name="__codelineno-4-77" href="#__codelineno-4-77"></a><span class="w">  </span><span class="sb">```</span>
</span><span id="__span-4-78"><a id="__codelineno-4-78" name="__codelineno-4-78" href="#__codelineno-4-78"></a>&lt;/details&gt;
</span><span id="__span-4-79"><a id="__codelineno-4-79" name="__codelineno-4-79" href="#__codelineno-4-79"></a>
</span><span id="__span-4-80"><a id="__codelineno-4-80" name="__codelineno-4-80" href="#__codelineno-4-80"></a>
</span><span id="__span-4-81"><a id="__codelineno-4-81" name="__codelineno-4-81" href="#__codelineno-4-81"></a>
</span><span id="__span-4-82"><a id="__codelineno-4-82" name="__codelineno-4-82" href="#__codelineno-4-82"></a>
</span><span id="__span-4-83"><a id="__codelineno-4-83" name="__codelineno-4-83" href="#__codelineno-4-83"></a><span class="c">### &lt;span style=&quot;font-family: &#39;Segoe UI&#39;, sans-serif; letter-spacing: 1px;color: #485BDA;&quot;&gt;Download  Python and place in the same folder&lt;/span&gt;</span>
</span><span id="__span-4-84"><a id="__codelineno-4-84" name="__codelineno-4-84" href="#__codelineno-4-84"></a>
</span><span id="__span-4-85"><a id="__codelineno-4-85" name="__codelineno-4-85" href="#__codelineno-4-85"></a>Download<span class="w"> </span>Python<span class="w"> </span><span class="m">3</span>.11.9<span class="w"> </span>from<span class="w"> </span><span class="o">[</span>this<span class="w"> </span>site<span class="o">](</span>https://www.python.org/ftp/python/3.11.9/Python-3.11.9.tgz<span class="o">)</span><span class="w"> </span>and<span class="w"> </span>place<span class="w"> </span>it<span class="w"> </span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span>same<span class="w"> </span>directory.
</span><span id="__span-4-86"><a id="__codelineno-4-86" name="__codelineno-4-86" href="#__codelineno-4-86"></a>
</span><span id="__span-4-87"><a id="__codelineno-4-87" name="__codelineno-4-87" href="#__codelineno-4-87"></a><span class="c">### &lt;span style=&quot;font-family: &#39;Segoe UI&#39;, sans-serif; letter-spacing: 1px;color: #485BDA;&quot;&gt;Build the Docker Image:&lt;/span&gt;</span>
</span><span id="__span-4-88"><a id="__codelineno-4-88" name="__codelineno-4-88" href="#__codelineno-4-88"></a><span class="w">   </span>-<span class="w"> </span>Open<span class="w"> </span>a<span class="w"> </span>terminal<span class="w"> </span>and<span class="w"> </span>navigate<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>directory<span class="w"> </span>containing<span class="w"> </span>the<span class="w"> </span>Dockerfile.
</span><span id="__span-4-89"><a id="__codelineno-4-89" name="__codelineno-4-89" href="#__codelineno-4-89"></a><span class="w">   </span>-<span class="w"> </span>Run<span class="w"> </span>the<span class="w"> </span>following<span class="w"> </span><span class="nb">command</span><span class="w"> </span>to<span class="w"> </span>build<span class="w"> </span>the<span class="w"> </span>Docker<span class="w"> </span>image:
</span><span id="__span-4-90"><a id="__codelineno-4-90" name="__codelineno-4-90" href="#__codelineno-4-90"></a>
</span><span id="__span-4-91"><a id="__codelineno-4-91" name="__codelineno-4-91" href="#__codelineno-4-91"></a><span class="w">     </span><span class="sb">```</span>bash
</span><span id="__span-4-92"><a id="__codelineno-4-92" name="__codelineno-4-92" href="#__codelineno-4-92"></a><span class="w">     </span>docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>my-debian-pyspark<span class="w"> </span>.
</span><span id="__span-4-93"><a id="__codelineno-4-93" name="__codelineno-4-93" href="#__codelineno-4-93"></a><span class="w">     </span><span class="sb">```</span>
</span><span id="__span-4-94"><a id="__codelineno-4-94" name="__codelineno-4-94" href="#__codelineno-4-94"></a>
</span><span id="__span-4-95"><a id="__codelineno-4-95" name="__codelineno-4-95" href="#__codelineno-4-95"></a><span class="c">### &lt;span style=&quot;font-family: &#39;Segoe UI&#39;, sans-serif; letter-spacing: 1px;color: #485BDA;&quot;&gt;Run the Docker Container:&lt;/span&gt;</span>
</span><span id="__span-4-96"><a id="__codelineno-4-96" name="__codelineno-4-96" href="#__codelineno-4-96"></a><span class="w">   </span>-<span class="w"> </span>Once<span class="w"> </span>the<span class="w"> </span>image<span class="w"> </span>is<span class="w"> </span>built,<span class="w"> </span>run<span class="w"> </span>the<span class="w"> </span>container<span class="w"> </span>using<span class="w"> </span>the<span class="w"> </span>command:
</span><span id="__span-4-97"><a id="__codelineno-4-97" name="__codelineno-4-97" href="#__codelineno-4-97"></a>
</span><span id="__span-4-98"><a id="__codelineno-4-98" name="__codelineno-4-98" href="#__codelineno-4-98"></a><span class="w">     </span><span class="sb">```</span>bash
</span><span id="__span-4-99"><a id="__codelineno-4-99" name="__codelineno-4-99" href="#__codelineno-4-99"></a><span class="w">     </span>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--name<span class="w"> </span>my-debian-pyspark-container<span class="w"> </span>my-debian-pyspark
</span><span id="__span-4-100"><a id="__codelineno-4-100" name="__codelineno-4-100" href="#__codelineno-4-100"></a><span class="w">     </span><span class="sb">```</span>
</span><span id="__span-4-101"><a id="__codelineno-4-101" name="__codelineno-4-101" href="#__codelineno-4-101"></a>
</span><span id="__span-4-102"><a id="__codelineno-4-102" name="__codelineno-4-102" href="#__codelineno-4-102"></a><span class="c">## &lt;span style=&quot;font-family: &#39;Segoe UI&#39;, sans-serif; letter-spacing: 1px;color: #485BDA;&quot;&gt;Details of the Container&lt;/span&gt;</span>
</span><span id="__span-4-103"><a id="__codelineno-4-103" name="__codelineno-4-103" href="#__codelineno-4-103"></a><span class="p">|</span><span class="w"> </span>**Category**<span class="w">             </span><span class="p">|</span><span class="w"> </span>**Details**<span class="w">                                                                                     </span><span class="p">|</span>
</span><span id="__span-4-104"><a id="__codelineno-4-104" name="__codelineno-4-104" href="#__codelineno-4-104"></a><span class="p">|</span>--------------------------<span class="p">|</span>-------------------------------------------------------------------------------------------------<span class="p">|</span>
</span><span id="__span-4-105"><a id="__codelineno-4-105" name="__codelineno-4-105" href="#__codelineno-4-105"></a><span class="p">|</span><span class="w"> </span>**Base<span class="w"> </span>Image**<span class="w">            </span><span class="p">|</span><span class="w"> </span>Debian<span class="w"> </span><span class="o">(</span>latest<span class="o">)</span><span class="w">                                                                                 </span><span class="p">|</span>
</span><span id="__span-4-106"><a id="__codelineno-4-106" name="__codelineno-4-106" href="#__codelineno-4-106"></a><span class="p">|</span><span class="w"> </span>**Python<span class="w"> </span>Version**<span class="w">        </span><span class="p">|</span><span class="w"> </span>Python<span class="w"> </span><span class="m">3</span>.11.9<span class="w">                                                                                   </span><span class="p">|</span>
</span><span id="__span-4-107"><a id="__codelineno-4-107" name="__codelineno-4-107" href="#__codelineno-4-107"></a><span class="p">|</span><span class="w"> </span>**Java<span class="w"> </span>Version**<span class="w">          </span><span class="p">|</span><span class="w"> </span>OpenJDK<span class="w"> </span><span class="m">17</span><span class="w">                                                                                      </span><span class="p">|</span>
</span><span id="__span-4-108"><a id="__codelineno-4-108" name="__codelineno-4-108" href="#__codelineno-4-108"></a><span class="p">|</span><span class="w"> </span>**PySpark<span class="w"> </span>Version**<span class="w">       </span><span class="p">|</span><span class="w"> </span>Latest<span class="w"> </span>via<span class="w"> </span>pip<span class="w">                                                                                  </span><span class="p">|</span>
</span><span id="__span-4-109"><a id="__codelineno-4-109" name="__codelineno-4-109" href="#__codelineno-4-109"></a><span class="p">|</span><span class="w"> </span>**Environment<span class="w"> </span>Variables**<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="sb">`</span>JAVA_HOME<span class="sb">`</span>:<span class="w"> </span><span class="sb">`</span>/usr/lib/jvm/java-17-openjdk-amd64<span class="sb">`</span>,<span class="w"> </span><span class="sb">`</span>PYTHONPATH<span class="sb">`</span>:<span class="w"> </span><span class="sb">`</span>/usr/local/lib/python3.11/dist-packages<span class="sb">`</span>,<span class="w"> </span><span class="sb">`</span>PYSPARK_PYTHON<span class="sb">`</span>:<span class="w"> </span><span class="sb">`</span>/usr/local/bin/python3.11<span class="sb">`</span>,<span class="w"> </span><span class="sb">`</span>PATH<span class="sb">`</span>:<span class="w"> </span><span class="sb">`</span><span class="nv">$PATH</span>:<span class="nv">$JAVA_HOME</span>/bin<span class="sb">`</span><span class="w"> </span><span class="p">|</span>
</span><span id="__span-4-110"><a id="__codelineno-4-110" name="__codelineno-4-110" href="#__codelineno-4-110"></a><span class="p">|</span><span class="w"> </span>**Installed<span class="w"> </span>Packages**<span class="w">    </span><span class="p">|</span><span class="w"> </span>Build<span class="w"> </span>tools<span class="w"> </span><span class="o">(</span>curl,<span class="w"> </span>wget,<span class="w"> </span>tar,<span class="w"> </span>etc.<span class="o">)</span>,<span class="w"> </span>Python<span class="w"> </span><span class="m">3</span>.11.9<span class="w"> </span><span class="o">(</span><span class="nb">source</span><span class="o">)</span>,<span class="w"> </span>OpenJDK<span class="w"> </span><span class="m">17</span>,<span class="w"> </span>PySpark<span class="w"> </span><span class="o">(</span>pip<span class="o">)</span><span class="w">           </span><span class="p">|</span>
</span><span id="__span-4-111"><a id="__codelineno-4-111" name="__codelineno-4-111" href="#__codelineno-4-111"></a><span class="p">|</span><span class="w"> </span>**User<span class="w"> </span>Configuration**<span class="w">    </span><span class="p">|</span><span class="w"> </span>Root<span class="w"> </span>user<span class="w"> </span><span class="p">&amp;</span><span class="w"> </span><span class="sb">`</span>dwdas<span class="sb">`</span><span class="w"> </span><span class="o">(</span>password:<span class="w"> </span><span class="sb">`</span>Passw0rd<span class="sb">`</span>,<span class="w"> </span>sudo<span class="w"> </span>access<span class="o">)</span><span class="w">                                         </span><span class="p">|</span>
</span><span id="__span-4-112"><a id="__codelineno-4-112" name="__codelineno-4-112" href="#__codelineno-4-112"></a><span class="p">|</span><span class="w"> </span>**Exposed<span class="w"> </span>Port**<span class="w">          </span><span class="p">|</span><span class="w"> </span><span class="m">8888</span><span class="w"> </span><span class="o">(</span><span class="k">for</span><span class="w"> </span>Jupyter<span class="o">)</span><span class="w">                                                                              </span><span class="p">|</span>
</span><span id="__span-4-113"><a id="__codelineno-4-113" name="__codelineno-4-113" href="#__codelineno-4-113"></a><span class="p">|</span><span class="w"> </span>**Default<span class="w"> </span>Command**<span class="w">       </span><span class="p">|</span><span class="w"> </span>Bash<span class="w"> </span>shell<span class="w"> </span>start<span class="w">                                                                                </span><span class="p">|</span>
</span><span id="__span-4-114"><a id="__codelineno-4-114" name="__codelineno-4-114" href="#__codelineno-4-114"></a>
</span><span id="__span-4-115"><a id="__codelineno-4-115" name="__codelineno-4-115" href="#__codelineno-4-115"></a>
</span><span id="__span-4-116"><a id="__codelineno-4-116" name="__codelineno-4-116" href="#__codelineno-4-116"></a><span class="c"># &lt;span style=&quot;font-family: &#39;Segoe UI&#39;, sans-serif; letter-spacing: 1px;color: #006600;&quot;&gt;**Debian, Pip Python, Pip Pyspark - venv.**&lt;/span&gt;</span>
</span><span id="__span-4-117"><a id="__codelineno-4-117" name="__codelineno-4-117" href="#__codelineno-4-117"></a>
</span><span id="__span-4-118"><a id="__codelineno-4-118" name="__codelineno-4-118" href="#__codelineno-4-118"></a>This<span class="w"> </span>section<span class="w"> </span>shows<span class="w"> </span>you<span class="w"> </span>how<span class="w"> </span>to<span class="w"> </span>create<span class="w"> </span>a<span class="w"> </span>Docker<span class="w"> </span>container<span class="w"> </span>with<span class="w"> </span>the<span class="w"> </span>latest<span class="w"> </span>Debian,<span class="w"> </span>Python<span class="w"> </span><span class="m">3</span>.11,<span class="w"> </span>OpenJDK<span class="w"> </span><span class="m">17</span>,<span class="w"> </span>and<span class="w"> </span>PySpark<span class="w"> </span>using<span class="w"> </span>the<span class="w"> </span>recommended<span class="w"> </span>venv<span class="w"> </span>approach.<span class="w"> </span>We’ll<span class="w"> </span><span class="nb">set</span><span class="w"> </span>up<span class="w"> </span>a<span class="w"> </span>root<span class="w"> </span>user<span class="w"> </span>and<span class="w"> </span>a<span class="w"> </span>named<span class="w"> </span>user<span class="w"> </span>with<span class="w"> </span>essential<span class="w"> </span>environment<span class="w"> </span>variables.
</span><span id="__span-4-119"><a id="__codelineno-4-119" name="__codelineno-4-119" href="#__codelineno-4-119"></a>
</span><span id="__span-4-120"><a id="__codelineno-4-120" name="__codelineno-4-120" href="#__codelineno-4-120"></a>Note:<span class="w"> </span>Newer<span class="w"> </span>Debian<span class="w"> </span>versions<span class="w"> </span>enforce<span class="w"> </span>using<span class="w"> </span>venv<span class="w"> </span><span class="k">for</span><span class="w"> </span>pip<span class="w"> </span>install.<span class="w"> </span>We<span class="w"> </span>will<span class="w"> </span>install<span class="w"> </span>Python<span class="w"> </span>using<span class="w"> </span>apt-get<span class="w"> </span>and<span class="w"> </span><span class="nb">set</span><span class="w"> </span>up<span class="w"> </span>venv<span class="w"> </span>from<span class="w"> </span>the<span class="w"> </span><span class="nb">command</span><span class="w"> </span>line.
</span><span id="__span-4-121"><a id="__codelineno-4-121" name="__codelineno-4-121" href="#__codelineno-4-121"></a>
</span><span id="__span-4-122"><a id="__codelineno-4-122" name="__codelineno-4-122" href="#__codelineno-4-122"></a>We’ll<span class="w"> </span>use<span class="w"> </span>a<span class="w"> </span>Dockerfile<span class="w"> </span>and<span class="w"> </span>docker-compose.yml<span class="w"> </span><span class="k">for</span><span class="w"> </span>the<span class="w"> </span>setup.
</span><span id="__span-4-123"><a id="__codelineno-4-123" name="__codelineno-4-123" href="#__codelineno-4-123"></a>
</span><span id="__span-4-124"><a id="__codelineno-4-124" name="__codelineno-4-124" href="#__codelineno-4-124"></a><span class="c">## &lt;span style=&quot;font-family: &#39;Segoe UI&#39;, sans-serif; letter-spacing: 1px;color: #006600;&quot;&gt;Steps to Create the  Container&lt;/span&gt;</span>
</span><span id="__span-4-125"><a id="__codelineno-4-125" name="__codelineno-4-125" href="#__codelineno-4-125"></a>
</span><span id="__span-4-126"><a id="__codelineno-4-126" name="__codelineno-4-126" href="#__codelineno-4-126"></a><span class="c">### &lt;span style=&quot;font-family: &#39;Segoe UI&#39;, sans-serif; letter-spacing: 1px;color: #006600;&quot;&gt;Create a Dockerfile:&lt;/span&gt;</span>
</span><span id="__span-4-127"><a id="__codelineno-4-127" name="__codelineno-4-127" href="#__codelineno-4-127"></a><span class="w">   </span>-<span class="w"> </span>Create<span class="w"> </span>a<span class="w"> </span>Dockerfile<span class="w"> </span>with<span class="w"> </span>the<span class="w"> </span>following<span class="w"> </span>content:
</span><span id="__span-4-128"><a id="__codelineno-4-128" name="__codelineno-4-128" href="#__codelineno-4-128"></a>
</span><span id="__span-4-129"><a id="__codelineno-4-129" name="__codelineno-4-129" href="#__codelineno-4-129"></a>
</span><span id="__span-4-130"><a id="__codelineno-4-130" name="__codelineno-4-130" href="#__codelineno-4-130"></a>
</span><span id="__span-4-131"><a id="__codelineno-4-131" name="__codelineno-4-131" href="#__codelineno-4-131"></a>&lt;details<span class="w"> </span>open<span class="w"> </span><span class="nv">markdown</span><span class="o">=</span><span class="s2">&quot;block&quot;</span>&gt;
</span><span id="__span-4-132"><a id="__codelineno-4-132" name="__codelineno-4-132" href="#__codelineno-4-132"></a><span class="w">  </span>&lt;summary&gt;
</span><span id="__span-4-133"><a id="__codelineno-4-133" name="__codelineno-4-133" href="#__codelineno-4-133"></a><span class="w">   </span>Dockerfile
</span><span id="__span-4-134"><a id="__codelineno-4-134" name="__codelineno-4-134" href="#__codelineno-4-134"></a><span class="w">  </span>&lt;/summary&gt;
</span><span id="__span-4-135"><a id="__codelineno-4-135" name="__codelineno-4-135" href="#__codelineno-4-135"></a>
</span><span id="__span-4-136"><a id="__codelineno-4-136" name="__codelineno-4-136" href="#__codelineno-4-136"></a>
</span><span id="__span-4-137"><a id="__codelineno-4-137" name="__codelineno-4-137" href="#__codelineno-4-137"></a><span class="w">  </span><span class="sb">```</span>dockerfile
</span><span id="__span-4-138"><a id="__codelineno-4-138" name="__codelineno-4-138" href="#__codelineno-4-138"></a><span class="w">  </span>#<span class="w"> </span>Use<span class="w"> </span>the<span class="w"> </span>latest<span class="w"> </span>version<span class="w"> </span>of<span class="w"> </span>Debian<span class="w"> </span>as<span class="w"> </span>the<span class="w"> </span>base<span class="w"> </span>image
</span><span id="__span-4-139"><a id="__codelineno-4-139" name="__codelineno-4-139" href="#__codelineno-4-139"></a><span class="w">  </span>FROM<span class="w"> </span>debian:latest
</span><span id="__span-4-140"><a id="__codelineno-4-140" name="__codelineno-4-140" href="#__codelineno-4-140"></a>
</span><span id="__span-4-141"><a id="__codelineno-4-141" name="__codelineno-4-141" href="#__codelineno-4-141"></a><span class="w">  </span>#<span class="w"> </span>Set<span class="w"> </span>environment<span class="w"> </span>variable<span class="w"> </span>to<span class="w"> </span>avoid<span class="w"> </span>interactive<span class="w"> </span>prompts<span class="w"> </span>during<span class="w"> </span>package<span class="w"> </span>installation
</span><span id="__span-4-142"><a id="__codelineno-4-142" name="__codelineno-4-142" href="#__codelineno-4-142"></a><span class="w">  </span>ENV<span class="w"> </span><span class="nv">DEBIAN_FRONTEND</span><span class="o">=</span>noninteractive
</span><span id="__span-4-143"><a id="__codelineno-4-143" name="__codelineno-4-143" href="#__codelineno-4-143"></a>
</span><span id="__span-4-144"><a id="__codelineno-4-144" name="__codelineno-4-144" href="#__codelineno-4-144"></a><span class="w">  </span>#<span class="w"> </span>Update<span class="w"> </span>the<span class="w"> </span>package<span class="w"> </span>lists<span class="w"> </span>and<span class="w"> </span>install<span class="w"> </span>essential<span class="w"> </span>packages
</span><span id="__span-4-145"><a id="__codelineno-4-145" name="__codelineno-4-145" href="#__codelineno-4-145"></a><span class="w">  </span>RUN<span class="w"> </span>apt-get<span class="w"> </span>update<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-146"><a id="__codelineno-4-146" name="__codelineno-4-146" href="#__codelineno-4-146"></a><span class="w">      </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>curl<span class="w"> </span>wget<span class="w"> </span>tar<span class="w"> </span>bash<span class="w"> </span>ca-certificates<span class="w"> </span>sudo<span class="w"> </span>gnupg
</span><span id="__span-4-147"><a id="__codelineno-4-147" name="__codelineno-4-147" href="#__codelineno-4-147"></a>
</span><span id="__span-4-148"><a id="__codelineno-4-148" name="__codelineno-4-148" href="#__codelineno-4-148"></a><span class="w">  </span>#<span class="w"> </span>Install<span class="w"> </span>Python<span class="w"> </span><span class="m">3</span>.11,<span class="w"> </span>venv,<span class="w"> </span>pip,<span class="w"> </span>and<span class="w"> </span>OpenJDK<span class="w"> </span><span class="m">17</span>
</span><span id="__span-4-149"><a id="__codelineno-4-149" name="__codelineno-4-149" href="#__codelineno-4-149"></a><span class="w">  </span>RUN<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>python3.11<span class="w"> </span>python3.11-venv<span class="w"> </span>python3.11-dev<span class="w"> </span>python3-pip<span class="w"> </span>openjdk-17-jdk-headless
</span><span id="__span-4-150"><a id="__codelineno-4-150" name="__codelineno-4-150" href="#__codelineno-4-150"></a>
</span><span id="__span-4-151"><a id="__codelineno-4-151" name="__codelineno-4-151" href="#__codelineno-4-151"></a><span class="w">  </span>#<span class="w"> </span>Create<span class="w"> </span>a<span class="w"> </span>virtual<span class="w"> </span>environment
</span><span id="__span-4-152"><a id="__codelineno-4-152" name="__codelineno-4-152" href="#__codelineno-4-152"></a><span class="w">  </span>RUN<span class="w"> </span>python3.11<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>/opt/venv
</span><span id="__span-4-153"><a id="__codelineno-4-153" name="__codelineno-4-153" href="#__codelineno-4-153"></a>
</span><span id="__span-4-154"><a id="__codelineno-4-154" name="__codelineno-4-154" href="#__codelineno-4-154"></a><span class="w">  </span>#<span class="w"> </span>Activate<span class="w"> </span>the<span class="w"> </span>virtual<span class="w"> </span>environment<span class="w"> </span>and<span class="w"> </span>install<span class="w"> </span>PySpark
</span><span id="__span-4-155"><a id="__codelineno-4-155" name="__codelineno-4-155" href="#__codelineno-4-155"></a><span class="w">  </span>RUN<span class="w"> </span>/opt/venv/bin/python<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>pyspark
</span><span id="__span-4-156"><a id="__codelineno-4-156" name="__codelineno-4-156" href="#__codelineno-4-156"></a>
</span><span id="__span-4-157"><a id="__codelineno-4-157" name="__codelineno-4-157" href="#__codelineno-4-157"></a><span class="w">  </span>#<span class="w"> </span>Set<span class="w"> </span>environment<span class="w"> </span>variables
</span><span id="__span-4-158"><a id="__codelineno-4-158" name="__codelineno-4-158" href="#__codelineno-4-158"></a><span class="w">  </span>ENV<span class="w"> </span><span class="nv">JAVA_HOME</span><span class="o">=</span>/usr/lib/jvm/java-17-openjdk-amd64
</span><span id="__span-4-159"><a id="__codelineno-4-159" name="__codelineno-4-159" href="#__codelineno-4-159"></a><span class="w">  </span>ENV<span class="w"> </span><span class="nv">PYTHONPATH</span><span class="o">=</span>/opt/venv/lib/python3.11/site-packages
</span><span id="__span-4-160"><a id="__codelineno-4-160" name="__codelineno-4-160" href="#__codelineno-4-160"></a><span class="w">  </span>ENV<span class="w"> </span><span class="nv">PYSPARK_PYTHON</span><span class="o">=</span>/opt/venv/bin/python
</span><span id="__span-4-161"><a id="__codelineno-4-161" name="__codelineno-4-161" href="#__codelineno-4-161"></a><span class="w">  </span>ENV<span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:<span class="nv">$JAVA_HOME</span>/bin:/opt/venv/bin
</span><span id="__span-4-162"><a id="__codelineno-4-162" name="__codelineno-4-162" href="#__codelineno-4-162"></a>
</span><span id="__span-4-163"><a id="__codelineno-4-163" name="__codelineno-4-163" href="#__codelineno-4-163"></a><span class="w">  </span>#<span class="w"> </span>Clean<span class="w"> </span>up<span class="w"> </span>the<span class="w"> </span>package<span class="w"> </span>lists<span class="w"> </span>to<span class="w"> </span>reduce<span class="w"> </span>the<span class="w"> </span>image<span class="w"> </span>size
</span><span id="__span-4-164"><a id="__codelineno-4-164" name="__codelineno-4-164" href="#__codelineno-4-164"></a><span class="w">  </span>RUN<span class="w"> </span>apt-get<span class="w"> </span>clean<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span>/var/lib/apt/lists/*
</span><span id="__span-4-165"><a id="__codelineno-4-165" name="__codelineno-4-165" href="#__codelineno-4-165"></a>
</span><span id="__span-4-166"><a id="__codelineno-4-166" name="__codelineno-4-166" href="#__codelineno-4-166"></a><span class="w">  </span>#<span class="w"> </span>Create<span class="w"> </span>a<span class="w"> </span>root<span class="w"> </span>user<span class="w"> </span>and<span class="w"> </span><span class="nb">set</span><span class="w"> </span>its<span class="w"> </span>password
</span><span id="__span-4-167"><a id="__codelineno-4-167" name="__codelineno-4-167" href="#__codelineno-4-167"></a><span class="w">  </span>RUN<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;root:Passw0rd&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>chpasswd
</span><span id="__span-4-168"><a id="__codelineno-4-168" name="__codelineno-4-168" href="#__codelineno-4-168"></a>
</span><span id="__span-4-169"><a id="__codelineno-4-169" name="__codelineno-4-169" href="#__codelineno-4-169"></a><span class="w">  </span>#<span class="w"> </span>Create<span class="w"> </span>a<span class="w"> </span>new<span class="w"> </span>user<span class="w"> </span><span class="s1">&#39;dwdas&#39;</span>,<span class="w"> </span><span class="nb">set</span><span class="w"> </span>a<span class="w"> </span>password,<span class="w"> </span>and<span class="w"> </span>add<span class="w"> </span>this<span class="w"> </span>user<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>sudo<span class="w"> </span>group
</span><span id="__span-4-170"><a id="__codelineno-4-170" name="__codelineno-4-170" href="#__codelineno-4-170"></a><span class="w">  </span>RUN<span class="w"> </span>useradd<span class="w"> </span>-ms<span class="w"> </span>/bin/bash<span class="w"> </span>dwdas<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;dwdas:Passw0rd&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>chpasswd<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>adduser<span class="w"> </span>dwdas<span class="w"> </span>sudo
</span><span id="__span-4-171"><a id="__codelineno-4-171" name="__codelineno-4-171" href="#__codelineno-4-171"></a>
</span><span id="__span-4-172"><a id="__codelineno-4-172" name="__codelineno-4-172" href="#__codelineno-4-172"></a><span class="w">  </span>#<span class="w"> </span>Allow<span class="w"> </span>the<span class="w"> </span><span class="s1">&#39;dwdas&#39;</span><span class="w"> </span>user<span class="w"> </span>to<span class="w"> </span>run<span class="w"> </span>sudo<span class="w"> </span>commands<span class="w"> </span>without<span class="w"> </span>a<span class="w"> </span>password
</span><span id="__span-4-173"><a id="__codelineno-4-173" name="__codelineno-4-173" href="#__codelineno-4-173"></a><span class="w">  </span>RUN<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;dwdas ALL=(ALL) NOPASSWD:ALL&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>/etc/sudoers
</span><span id="__span-4-174"><a id="__codelineno-4-174" name="__codelineno-4-174" href="#__codelineno-4-174"></a>
</span><span id="__span-4-175"><a id="__codelineno-4-175" name="__codelineno-4-175" href="#__codelineno-4-175"></a><span class="w">  </span>#<span class="w"> </span>Set<span class="w"> </span>the<span class="w"> </span>working<span class="w"> </span>directory<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>home<span class="w"> </span>directory<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>new<span class="w"> </span>user
</span><span id="__span-4-176"><a id="__codelineno-4-176" name="__codelineno-4-176" href="#__codelineno-4-176"></a><span class="w">  </span>WORKDIR<span class="w"> </span>/home/dwdas
</span><span id="__span-4-177"><a id="__codelineno-4-177" name="__codelineno-4-177" href="#__codelineno-4-177"></a>
</span><span id="__span-4-178"><a id="__codelineno-4-178" name="__codelineno-4-178" href="#__codelineno-4-178"></a><span class="w">  </span>#<span class="w"> </span>Switch<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>new<span class="w"> </span>user<span class="w"> </span><span class="s1">&#39;dwdas&#39;</span>
</span><span id="__span-4-179"><a id="__codelineno-4-179" name="__codelineno-4-179" href="#__codelineno-4-179"></a><span class="w">  </span>USER<span class="w"> </span>dwdas
</span><span id="__span-4-180"><a id="__codelineno-4-180" name="__codelineno-4-180" href="#__codelineno-4-180"></a>
</span><span id="__span-4-181"><a id="__codelineno-4-181" name="__codelineno-4-181" href="#__codelineno-4-181"></a><span class="w">  </span>#<span class="w"> </span>Expose<span class="w"> </span>port<span class="w"> </span><span class="m">8888</span>,<span class="w"> </span>commonly<span class="w"> </span>used<span class="w"> </span><span class="k">for</span><span class="w"> </span>Jupyter<span class="w"> </span>Notebook,<span class="w"> </span><span class="k">if</span><span class="w"> </span>needed
</span><span id="__span-4-182"><a id="__codelineno-4-182" name="__codelineno-4-182" href="#__codelineno-4-182"></a><span class="w">  </span>EXPOSE<span class="w"> </span><span class="m">8888</span>
</span><span id="__span-4-183"><a id="__codelineno-4-183" name="__codelineno-4-183" href="#__codelineno-4-183"></a>
</span><span id="__span-4-184"><a id="__codelineno-4-184" name="__codelineno-4-184" href="#__codelineno-4-184"></a><span class="w">  </span>#<span class="w"> </span>Set<span class="w"> </span>the<span class="w"> </span>default<span class="w"> </span><span class="nb">command</span><span class="w"> </span>to<span class="w"> </span>start<span class="w"> </span>a<span class="w"> </span>bash<span class="w"> </span>shell
</span><span id="__span-4-185"><a id="__codelineno-4-185" name="__codelineno-4-185" href="#__codelineno-4-185"></a><span class="w">  </span>CMD<span class="w"> </span><span class="o">[</span><span class="s2">&quot;bash&quot;</span><span class="o">]</span>
</span><span id="__span-4-186"><a id="__codelineno-4-186" name="__codelineno-4-186" href="#__codelineno-4-186"></a><span class="w">  </span><span class="sb">```</span>
</span><span id="__span-4-187"><a id="__codelineno-4-187" name="__codelineno-4-187" href="#__codelineno-4-187"></a>&lt;/details&gt;
</span><span id="__span-4-188"><a id="__codelineno-4-188" name="__codelineno-4-188" href="#__codelineno-4-188"></a>
</span><span id="__span-4-189"><a id="__codelineno-4-189" name="__codelineno-4-189" href="#__codelineno-4-189"></a>
</span><span id="__span-4-190"><a id="__codelineno-4-190" name="__codelineno-4-190" href="#__codelineno-4-190"></a>
</span><span id="__span-4-191"><a id="__codelineno-4-191" name="__codelineno-4-191" href="#__codelineno-4-191"></a>
</span><span id="__span-4-192"><a id="__codelineno-4-192" name="__codelineno-4-192" href="#__codelineno-4-192"></a>
</span><span id="__span-4-193"><a id="__codelineno-4-193" name="__codelineno-4-193" href="#__codelineno-4-193"></a>
</span><span id="__span-4-194"><a id="__codelineno-4-194" name="__codelineno-4-194" href="#__codelineno-4-194"></a>
</span><span id="__span-4-195"><a id="__codelineno-4-195" name="__codelineno-4-195" href="#__codelineno-4-195"></a>
</span><span id="__span-4-196"><a id="__codelineno-4-196" name="__codelineno-4-196" href="#__codelineno-4-196"></a>
</span><span id="__span-4-197"><a id="__codelineno-4-197" name="__codelineno-4-197" href="#__codelineno-4-197"></a>
</span><span id="__span-4-198"><a id="__codelineno-4-198" name="__codelineno-4-198" href="#__codelineno-4-198"></a>
</span><span id="__span-4-199"><a id="__codelineno-4-199" name="__codelineno-4-199" href="#__codelineno-4-199"></a>
</span><span id="__span-4-200"><a id="__codelineno-4-200" name="__codelineno-4-200" href="#__codelineno-4-200"></a>
</span><span id="__span-4-201"><a id="__codelineno-4-201" name="__codelineno-4-201" href="#__codelineno-4-201"></a>
</span><span id="__span-4-202"><a id="__codelineno-4-202" name="__codelineno-4-202" href="#__codelineno-4-202"></a>
</span><span id="__span-4-203"><a id="__codelineno-4-203" name="__codelineno-4-203" href="#__codelineno-4-203"></a>
</span><span id="__span-4-204"><a id="__codelineno-4-204" name="__codelineno-4-204" href="#__codelineno-4-204"></a>
</span><span id="__span-4-205"><a id="__codelineno-4-205" name="__codelineno-4-205" href="#__codelineno-4-205"></a>
</span><span id="__span-4-206"><a id="__codelineno-4-206" name="__codelineno-4-206" href="#__codelineno-4-206"></a><span class="c">### &lt;span style=&quot;font-family: &#39;Segoe UI&#39;, sans-serif; letter-spacing: 1px;color: #006600;&quot;&gt;Build the Docker Image:&lt;/span&gt;</span>
</span><span id="__span-4-207"><a id="__codelineno-4-207" name="__codelineno-4-207" href="#__codelineno-4-207"></a><span class="w">   </span>-<span class="w"> </span>Open<span class="w"> </span>a<span class="w"> </span>terminal<span class="w"> </span>and<span class="w"> </span>navigate<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>directory<span class="w"> </span>containing<span class="w"> </span>the<span class="w"> </span>Dockerfile.
</span><span id="__span-4-208"><a id="__codelineno-4-208" name="__codelineno-4-208" href="#__codelineno-4-208"></a><span class="w">   </span>-<span class="w"> </span>Run<span class="w"> </span>the<span class="w"> </span>following<span class="w"> </span><span class="nb">command</span><span class="w"> </span>to<span class="w"> </span>build<span class="w"> </span>the<span class="w"> </span>Docker<span class="w"> </span>image:
</span><span id="__span-4-209"><a id="__codelineno-4-209" name="__codelineno-4-209" href="#__codelineno-4-209"></a>
</span><span id="__span-4-210"><a id="__codelineno-4-210" name="__codelineno-4-210" href="#__codelineno-4-210"></a><span class="w">     </span><span class="sb">```</span>bash
</span><span id="__span-4-211"><a id="__codelineno-4-211" name="__codelineno-4-211" href="#__codelineno-4-211"></a><span class="w">     </span>docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>my-debian-pyspark-venv<span class="w"> </span>.
</span><span id="__span-4-212"><a id="__codelineno-4-212" name="__codelineno-4-212" href="#__codelineno-4-212"></a><span class="w">     </span><span class="sb">```</span>
</span><span id="__span-4-213"><a id="__codelineno-4-213" name="__codelineno-4-213" href="#__codelineno-4-213"></a>
</span><span id="__span-4-214"><a id="__codelineno-4-214" name="__codelineno-4-214" href="#__codelineno-4-214"></a><span class="c">### &lt;span style=&quot;font-family: &#39;Segoe UI&#39;, sans-serif; letter-spacing: 1px;color: #006600;&quot;&gt;Run the Docker Container:&lt;/span&gt;</span>
</span><span id="__span-4-215"><a id="__codelineno-4-215" name="__codelineno-4-215" href="#__codelineno-4-215"></a><span class="w">   </span>-<span class="w"> </span>Once<span class="w"> </span>the<span class="w"> </span>image<span class="w"> </span>is<span class="w"> </span>built,<span class="w"> </span>run<span class="w"> </span>the<span class="w"> </span>container<span class="w"> </span>using<span class="w"> </span>the<span class="w"> </span>command:
</span><span id="__span-4-216"><a id="__codelineno-4-216" name="__codelineno-4-216" href="#__codelineno-4-216"></a>
</span><span id="__span-4-217"><a id="__codelineno-4-217" name="__codelineno-4-217" href="#__codelineno-4-217"></a><span class="w">     </span><span class="sb">```</span>bash
</span><span id="__span-4-218"><a id="__codelineno-4-218" name="__codelineno-4-218" href="#__codelineno-4-218"></a><span class="w">     </span>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--name<span class="w"> </span>my-debian-pyspark-venv-container<span class="w"> </span>my-debian-pyspark-venv
</span><span id="__span-4-219"><a id="__codelineno-4-219" name="__codelineno-4-219" href="#__codelineno-4-219"></a><span class="w">     </span><span class="sb">```</span>
</span><span id="__span-4-220"><a id="__codelineno-4-220" name="__codelineno-4-220" href="#__codelineno-4-220"></a>
</span><span id="__span-4-221"><a id="__codelineno-4-221" name="__codelineno-4-221" href="#__codelineno-4-221"></a><span class="c">## &lt;span style=&quot;font-family: &#39;Segoe UI&#39;, sans-serif; letter-spacing: 1px;color: #006600;&quot;&gt;Details of the Container&lt;/span&gt;</span>
</span><span id="__span-4-222"><a id="__codelineno-4-222" name="__codelineno-4-222" href="#__codelineno-4-222"></a>
</span><span id="__span-4-223"><a id="__codelineno-4-223" name="__codelineno-4-223" href="#__codelineno-4-223"></a><span class="p">|</span><span class="w"> </span>**Category**<span class="w">             </span><span class="p">|</span><span class="w"> </span>**Details**<span class="w">                                                                                                              </span><span class="p">|</span>
</span><span id="__span-4-224"><a id="__codelineno-4-224" name="__codelineno-4-224" href="#__codelineno-4-224"></a><span class="p">|</span>--------------------------<span class="p">|</span>--------------------------------------------------------------------------------------------------------------------------<span class="p">|</span>
</span><span id="__span-4-225"><a id="__codelineno-4-225" name="__codelineno-4-225" href="#__codelineno-4-225"></a><span class="p">|</span><span class="w"> </span>**Base<span class="w"> </span>Image**<span class="w">            </span><span class="p">|</span><span class="w"> </span>Debian<span class="w"> </span><span class="o">(</span>latest<span class="o">)</span><span class="w">                                                                                                          </span><span class="p">|</span>
</span><span id="__span-4-226"><a id="__codelineno-4-226" name="__codelineno-4-226" href="#__codelineno-4-226"></a><span class="p">|</span><span class="w"> </span>**Python<span class="w"> </span>Version**<span class="w">        </span><span class="p">|</span><span class="w"> </span>Python<span class="w"> </span><span class="m">3</span>.11.9<span class="w">                                                                                                            </span><span class="p">|</span>
</span><span id="__span-4-227"><a id="__codelineno-4-227" name="__codelineno-4-227" href="#__codelineno-4-227"></a><span class="p">|</span><span class="w"> </span>**Java<span class="w"> </span>Version**<span class="w">          </span><span class="p">|</span><span class="w"> </span>OpenJDK<span class="w"> </span><span class="m">17</span><span class="w">                                                                                                               </span><span class="p">|</span>
</span><span id="__span-4-228"><a id="__codelineno-4-228" name="__codelineno-4-228" href="#__codelineno-4-228"></a><span class="p">|</span><span class="w"> </span>**PySpark<span class="w"> </span>Version**<span class="w">       </span><span class="p">|</span><span class="w"> </span>Installed<span class="w"> </span>via<span class="w"> </span>pip<span class="w"> </span><span class="k">in</span><span class="w"> </span>a<span class="w"> </span>virtual<span class="w"> </span>environment<span class="w">                                                                                </span><span class="p">|</span>
</span><span id="__span-4-229"><a id="__codelineno-4-229" name="__codelineno-4-229" href="#__codelineno-4-229"></a><span class="p">|</span><span class="w"> </span>**Virtual<span class="w"> </span>Environment**<span class="w">   </span><span class="p">|</span><span class="w"> </span>Created<span class="w"> </span>with<span class="w"> </span><span class="sb">`</span>python3.11<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>/opt/venv<span class="sb">`</span><span class="w">                                                                              </span><span class="p">|</span>
</span><span id="__span-4-230"><a id="__codelineno-4-230" name="__codelineno-4-230" href="#__codelineno-4-230"></a><span class="p">|</span><span class="w"> </span>**Environment<span class="w"> </span>Variables**<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="sb">`</span>JAVA_HOME<span class="sb">`</span>:<span class="w"> </span><span class="sb">`</span>/usr/lib/jvm/java-17-openjdk-amd64<span class="sb">`</span>,<span class="w"> </span><span class="sb">`</span>PYTHONPATH<span class="sb">`</span>:<span class="w"> </span><span class="sb">`</span>/opt/venv/lib/python3.11/site-packages<span class="sb">`</span>,<span class="w"> </span><span class="sb">`</span>PYSPARK_PYTHON<span class="sb">`</span>:<span class="w"> </span><span class="sb">`</span>/opt/venv/bin/python<span class="sb">`</span>,<span class="w"> </span><span class="sb">`</span>PATH<span class="sb">`</span>:<span class="w"> </span><span class="sb">`</span><span class="nv">$PATH</span>:<span class="nv">$JAVA_HOME</span>/bin:/opt/venv/bin<span class="sb">`</span><span class="w"> </span><span class="p">|</span>
</span><span id="__span-4-231"><a id="__codelineno-4-231" name="__codelineno-4-231" href="#__codelineno-4-231"></a><span class="p">|</span><span class="w"> </span>**Installed<span class="w"> </span>Packages**<span class="w">    </span><span class="p">|</span><span class="w"> </span>Essential<span class="w"> </span>tools<span class="w"> </span><span class="o">(</span>curl,<span class="w"> </span>wget,<span class="w"> </span>tar,<span class="w"> </span>bash,<span class="w"> </span>etc.<span class="o">)</span>,<span class="w"> </span>Python<span class="w"> </span><span class="m">3</span>.11,<span class="w"> </span>venv,<span class="w"> </span>pip,<span class="w"> </span>OpenJDK<span class="w"> </span><span class="m">17</span>,<span class="w"> </span>PySpark<span class="w"> </span><span class="o">(</span><span class="k">in</span><span class="w"> </span>venv<span class="o">)</span><span class="w">                     </span><span class="p">|</span>
</span><span id="__span-4-232"><a id="__codelineno-4-232" name="__codelineno-4-232" href="#__codelineno-4-232"></a><span class="p">|</span><span class="w"> </span>**User<span class="w"> </span>Configuration**<span class="w">    </span><span class="p">|</span><span class="w"> </span>Root<span class="w"> </span>user<span class="w"> </span><span class="p">&amp;</span><span class="w"> </span><span class="sb">`</span>dwdas<span class="sb">`</span><span class="w"> </span><span class="o">(</span>password:<span class="w"> </span><span class="sb">`</span>Passw0rd<span class="sb">`</span>,<span class="w"> </span>sudo<span class="w"> </span>access<span class="o">)</span><span class="w">                                                                  </span><span class="p">|</span>
</span><span id="__span-4-233"><a id="__codelineno-4-233" name="__codelineno-4-233" href="#__codelineno-4-233"></a><span class="p">|</span><span class="w"> </span>**Exposed<span class="w"> </span>Port**<span class="w">          </span><span class="p">|</span><span class="w"> </span><span class="m">8888</span><span class="w"> </span><span class="o">(</span><span class="k">for</span><span class="w"> </span>Jupyter<span class="o">)</span><span class="w">                                                                                                       </span><span class="p">|</span>
</span><span id="__span-4-234"><a id="__codelineno-4-234" name="__codelineno-4-234" href="#__codelineno-4-234"></a><span class="p">|</span><span class="w"> </span>**Default<span class="w"> </span>Command**<span class="w">       </span><span class="p">|</span><span class="w"> </span>Bash<span class="w"> </span>shell<span class="w"> </span>start<span class="w">                                                                                                         </span><span class="p">|</span>
</span><span id="__span-4-235"><a id="__codelineno-4-235" name="__codelineno-4-235" href="#__codelineno-4-235"></a>
</span><span id="__span-4-236"><a id="__codelineno-4-236" name="__codelineno-4-236" href="#__codelineno-4-236"></a>
</span><span id="__span-4-237"><a id="__codelineno-4-237" name="__codelineno-4-237" href="#__codelineno-4-237"></a>
</span><span id="__span-4-238"><a id="__codelineno-4-238" name="__codelineno-4-238" href="#__codelineno-4-238"></a>To<span class="w"> </span>modify<span class="w"> </span>the<span class="w"> </span>setup<span class="w"> </span>so<span class="w"> </span>that<span class="w"> </span>the<span class="w"> </span><span class="sb">`</span>conf<span class="sb">`</span><span class="w"> </span>directory<span class="w"> </span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span>Spark<span class="w"> </span>container<span class="w"> </span>is<span class="w"> </span>mapped<span class="w"> </span>to<span class="w"> </span>a<span class="w"> </span><span class="nb">local</span><span class="w"> </span>folder<span class="w"> </span>on<span class="w"> </span>your<span class="w"> </span>machine<span class="w"> </span><span class="o">(</span>and<span class="w"> </span>the<span class="w"> </span>folder<span class="w"> </span>is<span class="w"> </span>auto-created<span class="o">)</span>,<span class="w"> </span>we<span class="w"> </span>need<span class="w"> </span>to<span class="w"> </span>update<span class="w"> </span>the<span class="w"> </span><span class="sb">`</span>docker<span class="w"> </span>run<span class="sb">`</span><span class="w"> </span><span class="nb">command</span><span class="w"> </span>to<span class="w"> </span>include<span class="w"> </span>a<span class="w"> </span>volume<span class="w"> </span>mapping.<span class="w"> </span>
</span><span id="__span-4-239"><a id="__codelineno-4-239" name="__codelineno-4-239" href="#__codelineno-4-239"></a>
</span><span id="__span-4-240"><a id="__codelineno-4-240" name="__codelineno-4-240" href="#__codelineno-4-240"></a><span class="c"># &lt;span style=&quot;font-family: &#39;Segoe UI&#39;, sans-serif; letter-spacing: 1px;color: #C22E2E;&quot;&gt;**Single-Node Bitnami Spark With Master and Worker**&lt;/span&gt;</span>
</span><span id="__span-4-241"><a id="__codelineno-4-241" name="__codelineno-4-241" href="#__codelineno-4-241"></a>
</span><span id="__span-4-242"><a id="__codelineno-4-242" name="__codelineno-4-242" href="#__codelineno-4-242"></a>
</span><span id="__span-4-243"><a id="__codelineno-4-243" name="__codelineno-4-243" href="#__codelineno-4-243"></a>Here,<span class="w"> </span>we<span class="w"> </span>will<span class="w"> </span>use<span class="w"> </span>the<span class="w"> </span>official<span class="w"> </span>Bitnami<span class="w"> </span>Spark<span class="w"> </span>Docker<span class="w"> </span>image<span class="w"> </span>to<span class="w"> </span><span class="nb">set</span><span class="w"> </span>up<span class="w"> </span>a<span class="w"> </span>single-node<span class="w"> </span>Spark<span class="w"> </span>environment.<span class="w"> </span>This<span class="w"> </span>setup<span class="w"> </span>will<span class="w"> </span>include<span class="w"> </span>both<span class="w"> </span>the<span class="w"> </span>Master<span class="w"> </span>and<span class="w"> </span>Worker.
</span><span id="__span-4-244"><a id="__codelineno-4-244" name="__codelineno-4-244" href="#__codelineno-4-244"></a>
</span><span id="__span-4-245"><a id="__codelineno-4-245" name="__codelineno-4-245" href="#__codelineno-4-245"></a><span class="c">## &lt;span style=&quot;font-family: &#39;Segoe UI&#39;, sans-serif; letter-spacing: 1px;color: #C22E2E;&quot;&gt;Steps to create the container&lt;/span&gt;</span>
</span><span id="__span-4-246"><a id="__codelineno-4-246" name="__codelineno-4-246" href="#__codelineno-4-246"></a>
</span><span id="__span-4-247"><a id="__codelineno-4-247" name="__codelineno-4-247" href="#__codelineno-4-247"></a>You<span class="w"> </span>can<span class="w"> </span>either<span class="w"> </span>download,<span class="w"> </span>unzip,<span class="w"> </span>and<span class="w"> </span>run<span class="w"> </span>the<span class="w"> </span><span class="sb">`</span>.bat<span class="sb">`</span><span class="w"> </span>file<span class="w"> </span>from<span class="w"> </span><span class="o">[</span>this<span class="w"> </span>link<span class="o">](</span>Dockerfiles/Bitnami_Spark_SingleNode_GOLD.zip<span class="o">)</span><span class="w"> </span>to<span class="w"> </span>create<span class="w"> </span>the<span class="w"> </span>entire<span class="w"> </span>container.<span class="w"> </span>Or,<span class="w"> </span>you<span class="w"> </span>can<span class="w"> </span>follow<span class="w"> </span>the<span class="w"> </span>steps<span class="w"> </span>manually.<span class="w"> </span>Both<span class="w"> </span>methods<span class="w"> </span>will<span class="w"> </span>give<span class="w"> </span>the<span class="w"> </span>same<span class="w"> </span>result.
</span><span id="__span-4-248"><a id="__codelineno-4-248" name="__codelineno-4-248" href="#__codelineno-4-248"></a>
</span><span id="__span-4-249"><a id="__codelineno-4-249" name="__codelineno-4-249" href="#__codelineno-4-249"></a><span class="c">### &lt;span style=&quot;font-family: &#39;Segoe UI&#39;, sans-serif; letter-spacing: 1px;color: #C22E2E;&quot;&gt;Create a Custom Dockerfile&lt;/span&gt;</span>
</span><span id="__span-4-250"><a id="__codelineno-4-250" name="__codelineno-4-250" href="#__codelineno-4-250"></a>
</span><span id="__span-4-251"><a id="__codelineno-4-251" name="__codelineno-4-251" href="#__codelineno-4-251"></a>In<span class="w"> </span>your<span class="w"> </span>folder<span class="w"> </span>create<span class="w"> </span>a<span class="w"> </span>file<span class="w"> </span>Dockerfile<span class="o">(</span>no<span class="w"> </span>extension<span class="o">)</span><span class="w"> </span>with<span class="w"> </span>the<span class="w"> </span>following<span class="w"> </span>content:
</span><span id="__span-4-252"><a id="__codelineno-4-252" name="__codelineno-4-252" href="#__codelineno-4-252"></a>
</span><span id="__span-4-253"><a id="__codelineno-4-253" name="__codelineno-4-253" href="#__codelineno-4-253"></a>
</span><span id="__span-4-254"><a id="__codelineno-4-254" name="__codelineno-4-254" href="#__codelineno-4-254"></a>
</span><span id="__span-4-255"><a id="__codelineno-4-255" name="__codelineno-4-255" href="#__codelineno-4-255"></a>
</span><span id="__span-4-256"><a id="__codelineno-4-256" name="__codelineno-4-256" href="#__codelineno-4-256"></a>
</span><span id="__span-4-257"><a id="__codelineno-4-257" name="__codelineno-4-257" href="#__codelineno-4-257"></a>&lt;details<span class="w"> </span>open<span class="w"> </span><span class="nv">markdown</span><span class="o">=</span><span class="s2">&quot;block&quot;</span>&gt;
</span><span id="__span-4-258"><a id="__codelineno-4-258" name="__codelineno-4-258" href="#__codelineno-4-258"></a><span class="w">  </span>&lt;summary&gt;
</span><span id="__span-4-259"><a id="__codelineno-4-259" name="__codelineno-4-259" href="#__codelineno-4-259"></a><span class="w">   </span>Dockerfile
</span><span id="__span-4-260"><a id="__codelineno-4-260" name="__codelineno-4-260" href="#__codelineno-4-260"></a><span class="w">  </span>&lt;/summary&gt;
</span><span id="__span-4-261"><a id="__codelineno-4-261" name="__codelineno-4-261" href="#__codelineno-4-261"></a>
</span><span id="__span-4-262"><a id="__codelineno-4-262" name="__codelineno-4-262" href="#__codelineno-4-262"></a><span class="sb">```</span>dockerfile
</span><span id="__span-4-263"><a id="__codelineno-4-263" name="__codelineno-4-263" href="#__codelineno-4-263"></a><span class="c"># Use the official Bitnami Spark image as the base. I always pull a constant image and not :latest.</span>
</span><span id="__span-4-264"><a id="__codelineno-4-264" name="__codelineno-4-264" href="#__codelineno-4-264"></a><span class="k">FROM</span><span class="w"> </span><span class="s">bitnami/spark:3.5.2-debian-12-r2</span>
</span><span id="__span-4-265"><a id="__codelineno-4-265" name="__codelineno-4-265" href="#__codelineno-4-265"></a>
</span><span id="__span-4-266"><a id="__codelineno-4-266" name="__codelineno-4-266" href="#__codelineno-4-266"></a><span class="c"># Step 1: Switch to root user to install software</span>
</span><span id="__span-4-267"><a id="__codelineno-4-267" name="__codelineno-4-267" href="#__codelineno-4-267"></a><span class="c"># We need to be root to install utilities and set up sudo permissions.</span>
</span><span id="__span-4-268"><a id="__codelineno-4-268" name="__codelineno-4-268" href="#__codelineno-4-268"></a><span class="k">USER</span><span class="w"> </span><span class="s">root</span>
</span><span id="__span-4-269"><a id="__codelineno-4-269" name="__codelineno-4-269" href="#__codelineno-4-269"></a>
</span><span id="__span-4-270"><a id="__codelineno-4-270" name="__codelineno-4-270" href="#__codelineno-4-270"></a><span class="c"># Step 2: Update the package list and install utilities. py4j and ipykernel is for VS studio connection.</span>
</span><span id="__span-4-271"><a id="__codelineno-4-271" name="__codelineno-4-271" href="#__codelineno-4-271"></a><span class="c"># Install common utilities like sudo, ping, and nano.</span>
</span><span id="__span-4-272"><a id="__codelineno-4-272" name="__codelineno-4-272" href="#__codelineno-4-272"></a><span class="c"># Update the base system</span>
</span><span id="__span-4-273"><a id="__codelineno-4-273" name="__codelineno-4-273" href="#__codelineno-4-273"></a><span class="k">RUN</span><span class="w"> </span>apt-get<span class="w"> </span>update<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-274"><a id="__codelineno-4-274" name="__codelineno-4-274" href="#__codelineno-4-274"></a><span class="w">    </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>sudo<span class="w"> </span>nano<span class="w"> </span>iputils-ping<span class="w"> </span>grep<span class="w"> </span>curl<span class="w"> </span>wget<span class="w"> </span>vim<span class="w"> </span>net-tools<span class="w"> </span>procps<span class="w"> </span>lsof<span class="w"> </span>telnet<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-275"><a id="__codelineno-4-275" name="__codelineno-4-275" href="#__codelineno-4-275"></a><span class="w">    </span>apt-get<span class="w"> </span>clean
</span><span id="__span-4-276"><a id="__codelineno-4-276" name="__codelineno-4-276" href="#__codelineno-4-276"></a>
</span><span id="__span-4-277"><a id="__codelineno-4-277" name="__codelineno-4-277" href="#__codelineno-4-277"></a><span class="c"># Install pip (if not already installed)</span>
</span><span id="__span-4-278"><a id="__codelineno-4-278" name="__codelineno-4-278" href="#__codelineno-4-278"></a><span class="k">RUN</span><span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>python3-pip
</span><span id="__span-4-279"><a id="__codelineno-4-279" name="__codelineno-4-279" href="#__codelineno-4-279"></a>
</span><span id="__span-4-280"><a id="__codelineno-4-280" name="__codelineno-4-280" href="#__codelineno-4-280"></a><span class="c"># Install py4j and ipykernel using pip. Required VS Code connection.</span>
</span><span id="__span-4-281"><a id="__codelineno-4-281" name="__codelineno-4-281" href="#__codelineno-4-281"></a><span class="k">RUN</span><span class="w"> </span>pip3<span class="w"> </span>install<span class="w"> </span>py4j<span class="w"> </span>ipykernel
</span><span id="__span-4-282"><a id="__codelineno-4-282" name="__codelineno-4-282" href="#__codelineno-4-282"></a>
</span><span id="__span-4-283"><a id="__codelineno-4-283" name="__codelineno-4-283" href="#__codelineno-4-283"></a><span class="c"># Step 3: Set the root user password to &#39;Passw0rd&#39;</span>
</span><span id="__span-4-284"><a id="__codelineno-4-284" name="__codelineno-4-284" href="#__codelineno-4-284"></a><span class="c"># This sets the root password to &#39;Passw0rd&#39; for future access.</span>
</span><span id="__span-4-285"><a id="__codelineno-4-285" name="__codelineno-4-285" href="#__codelineno-4-285"></a><span class="k">RUN</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;root:Passw0rd&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>chpasswd
</span><span id="__span-4-286"><a id="__codelineno-4-286" name="__codelineno-4-286" href="#__codelineno-4-286"></a>
</span><span id="__span-4-287"><a id="__codelineno-4-287" name="__codelineno-4-287" href="#__codelineno-4-287"></a><span class="c"># Step 4: Give sudo privileges to the &#39;spark&#39; user</span>
</span><span id="__span-4-288"><a id="__codelineno-4-288" name="__codelineno-4-288" href="#__codelineno-4-288"></a><span class="c"># Here, we are allowing the &#39;spark&#39; user to run commands as sudo without a password.</span>
</span><span id="__span-4-289"><a id="__codelineno-4-289" name="__codelineno-4-289" href="#__codelineno-4-289"></a><span class="k">RUN</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;spark ALL=(ALL) NOPASSWD: ALL&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>/etc/sudoers
</span><span id="__span-4-290"><a id="__codelineno-4-290" name="__codelineno-4-290" href="#__codelineno-4-290"></a>
</span><span id="__span-4-291"><a id="__codelineno-4-291" name="__codelineno-4-291" href="#__codelineno-4-291"></a><span class="c"># After finishing the setup, we dont switch back to any user. The bitnami original Dockerfile switches to user 1001 and the directory is /opt/bitnami/spark</span>
</span><span id="__span-4-292"><a id="__codelineno-4-292" name="__codelineno-4-292" href="#__codelineno-4-292"></a>
</span><span id="__span-4-293"><a id="__codelineno-4-293" name="__codelineno-4-293" href="#__codelineno-4-293"></a><span class="c"># Step 6: Expose necessary ports for Spark Web UI and communication</span>
</span><span id="__span-4-294"><a id="__codelineno-4-294" name="__codelineno-4-294" href="#__codelineno-4-294"></a><span class="c"># 4040: Spark Worker Web UI</span>
</span><span id="__span-4-295"><a id="__codelineno-4-295" name="__codelineno-4-295" href="#__codelineno-4-295"></a><span class="c"># 7077: Spark Master communication</span>
</span><span id="__span-4-296"><a id="__codelineno-4-296" name="__codelineno-4-296" href="#__codelineno-4-296"></a><span class="c"># 8080: Spark Master Web UI</span>
</span><span id="__span-4-297"><a id="__codelineno-4-297" name="__codelineno-4-297" href="#__codelineno-4-297"></a><span class="k">EXPOSE</span><span class="w"> </span><span class="s">4040 7077 8080</span>
</span><span id="__span-4-298"><a id="__codelineno-4-298" name="__codelineno-4-298" href="#__codelineno-4-298"></a>
</span><span id="__span-4-299"><a id="__codelineno-4-299" name="__codelineno-4-299" href="#__codelineno-4-299"></a><span class="c"># End of the Dockerfile</span>
</span></code></pre></div>
</details>

<h3 id="create-a-local-conf-directory"><span style="font-family: 'Segoe UI', sans-serif; letter-spacing: 1px;color: #C22E2E;">Create a Local <code>conf</code> Directory</span><a class="headerlink" href="#create-a-local-conf-directory" title="Permanent link">&para;</a></h3>
<p>Before running the container, create a folder named <code>local-spark-conf</code> in the same folder where your Dockerfiles are. This folder will store the configuration files and will be mapped to the <code>conf</code> directory inside the container.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>mkdir<span class="w"> </span>local-spark-conf
</span></code></pre></div>
<h3 id="build-the-docker-image"><span style="font-family: 'Segoe UI', sans-serif; letter-spacing: 1px;color: #C22E2E;"> Build the Docker Image</span><a class="headerlink" href="#build-the-docker-image" title="Permanent link">&para;</a></h3>
<p>Once the Dockerfile is ready, you can build the Docker image with the following command:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>bitnami-spark-single-node<span class="w"> </span>.
</span></code></pre></div>
<p>This command will create a Docker image called <code>bitnami-spark-single-node</code> using the Dockerfile you just created.</p>
<h3 id="run-the-container-and-map-the-conf-directory"><span style="font-family: 'Segoe UI', sans-serif; letter-spacing: 1px;color: #C22E2E;">Run the Container and Map the <code>conf</code> Directory</span><a class="headerlink" href="#run-the-container-and-map-the-conf-directory" title="Permanent link">&para;</a></h3>
<p>Now, we run the Spark container with the <code>conf</code> directory mapped to the local folder you created earlier. If the folder doesn’t exist, Docker will create it.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>--network<span class="w"> </span>dasnet<span class="w"> </span>--name<span class="w"> </span>bitnami-spark-single-node<span class="w"> </span>-p<span class="w"> </span><span class="m">4040</span>:4040<span class="w"> </span>-p<span class="w"> </span><span class="m">8080</span>:8080<span class="w"> </span>-p<span class="w"> </span><span class="m">7077</span>:7077<span class="w"> </span>-v<span class="w"> </span>./local-spark-conf:/opt/spark/conf<span class="w"> </span>bitnami-spark-single-node
</span></code></pre></div>
<h2 id="configuration-reference"><span style="font-family: 'Segoe UI', sans-serif; letter-spacing: 1px;color: #C22E2E;">Configuration Reference</span><a class="headerlink" href="#configuration-reference" title="Permanent link">&para;</a></h2>
<p>Here is a list of some components in this environment. The list is compiled from the official bitnami spark github <a href="https://github.com/bitnami/containers/blob/main/bitnami/spark/README.md">page</a>.</p>
<h3 id="environment-details"><span style="font-family: 'Segoe UI', sans-serif; letter-spacing: 1px;color: #C22E2E;">Environment Details</span><a class="headerlink" href="#environment-details" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th><strong>Component</strong></th>
<th><strong>Value</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>OS</strong></td>
<td>debian 12: bitnami/minideb:bookworm</td>
</tr>
<tr>
<td><strong>Python</strong></td>
<td>python-3.12.5-1: /opt/bitnami/python/bin/python</td>
</tr>
<tr>
<td><strong>PYTHONPATH</strong></td>
<td>/opt/bitnami/spark/python/</td>
</tr>
<tr>
<td><strong>Java</strong></td>
<td>java-17.0.12-10-1: JAVA_HOME = /opt/bitnami/java</td>
</tr>
<tr>
<td><strong>JAVA_HOME</strong></td>
<td>/opt/bitnami/java</td>
</tr>
<tr>
<td><strong>SPARK_HOME</strong></td>
<td>/opt/bitnami/spark</td>
</tr>
<tr>
<td><strong>SPARK_USER</strong></td>
<td>spark</td>
</tr>
<tr>
<td><strong>SPARK JARS Location for Installing External Jars</strong></td>
<td>/opt/bitnami/spark/jars</td>
</tr>
<tr>
<td><strong>Workdir</strong></td>
<td>/opt/bitnami/spark</td>
</tr>
<tr>
<td><strong>User</strong></td>
<td>1001</td>
</tr>
<tr>
<td><strong>Entrypoint</strong></td>
<td>/opt/bitnami/scripts/spark/entrypoint.sh</td>
</tr>
<tr>
<td><strong>Command</strong></td>
<td>/opt/bitnami/scripts/spark/run.sh</td>
</tr>
<tr>
<td><strong>Certificates</strong></td>
<td>/opt/bitnami/spark/conf/certs</td>
</tr>
<tr>
<td><strong>SPARK_SSL_KEYSTORE_FILE</strong></td>
<td>/opt/bitnami/spark/conf/certs/spark-keystore.jks</td>
</tr>
<tr>
<td><strong>SPARK_MODE</strong></td>
<td>master</td>
</tr>
<tr>
<td><strong>SPARK_MASTER_URL</strong></td>
<td>spark://spark-master:7077</td>
</tr>
<tr>
<td><strong>SPARK_SSL_ENABLED</strong></td>
<td>no</td>
</tr>
<tr>
<td><strong>Docker Logs Command</strong></td>
<td>docker logs bitnami-spark-single-node</td>
</tr>
</tbody>
</table>
<blockquote>
<p>Note: The Dockerfile also install py4j and ipykernel. These are reuqired for VS code to container using remote containers extension.</p>
</blockquote>
<h3 id="read-only-environment-variables-official-bitnami-github"><span style="font-family: 'Segoe UI', sans-serif; letter-spacing: 1px;color: #C22E2E;">Read-only Environment Variables (<a href="https://github.com/bitnami/containers/blob/main/bitnami/spark/README.md">Official Bitnami github</a>)</span><a class="headerlink" href="#read-only-environment-variables-official-bitnami-github" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th><strong>Name</strong></th>
<th><strong>Description</strong></th>
<th><strong>Value</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>SPARK_BASE_DIR</strong></td>
<td>Spark installation directory.</td>
<td>${BITNAMI_ROOT_DIR}/spark</td>
</tr>
<tr>
<td><strong>SPARK_CONF_DIR</strong></td>
<td>Spark configuration directory.</td>
<td>${SPARK_BASE_DIR}/conf</td>
</tr>
<tr>
<td><strong>SPARK_DEFAULT_CONF_DIR</strong></td>
<td>Spark default configuration directory.</td>
<td>${SPARK_BASE_DIR}/conf.default</td>
</tr>
<tr>
<td><strong>SPARK_WORK_DIR</strong></td>
<td>Spark workspace directory.</td>
<td>${SPARK_BASE_DIR}/work</td>
</tr>
<tr>
<td><strong>SPARK_CONF_FILE</strong></td>
<td>Spark configuration file path.</td>
<td>${SPARK_CONF_DIR}/spark-defaults.conf</td>
</tr>
<tr>
<td><strong>SPARK_LOG_DIR</strong></td>
<td>Spark logs directory.</td>
<td>${SPARK_BASE_DIR}/logs</td>
</tr>
<tr>
<td><strong>SPARK_TMP_DIR</strong></td>
<td>Spark tmp directory.</td>
<td>${SPARK_BASE_DIR}/tmp</td>
</tr>
<tr>
<td><strong>SPARK_JARS_DIR</strong></td>
<td>Spark jar directory.</td>
<td>${SPARK_BASE_DIR}/jars</td>
</tr>
<tr>
<td><strong>SPARK_INITSCRIPTS_DIR</strong></td>
<td>Spark init scripts directory.</td>
<td>/docker-entrypoint-initdb.d</td>
</tr>
<tr>
<td><strong>SPARK_USER</strong></td>
<td>Spark user.</td>
<td>spark</td>
</tr>
<tr>
<td><strong>SPARK_DAEMON_USER</strong></td>
<td>Spark system user.</td>
<td>spark</td>
</tr>
<tr>
<td><strong>SPARK_DAEMON_GROUP</strong></td>
<td>Spark system group.</td>
<td>spark</td>
</tr>
</tbody>
</table>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 - Das
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.top", "search.suggest", "search.highlight", "content.code.copy"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.f1b6f286.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>