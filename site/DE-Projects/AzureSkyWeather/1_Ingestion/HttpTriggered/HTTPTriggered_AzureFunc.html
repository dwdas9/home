
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://dwdas9.github.io/home/DE-Projects/AzureSkyWeather/1_Ingestion/HttpTriggered/HTTPTriggered_AzureFunc.html">
      
      
      
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.4">
    
    
      
        <title>Part 1A - Using Azure HTTP-Triggered Function - Das Digital Digest</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.8608ea7d.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
        <script src="https://unpkg.com/iframe-worker/shim"></script>
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#table-of-contents" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../../index.html" title="Das Digital Digest" class="md-header__button md-logo" aria-label="Das Digital Digest" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Das Digital Digest
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Part 1A - Using Azure HTTP-Triggered Function
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../index.html" title="Das Digital Digest" class="md-nav__button md-logo" aria-label="Das Digital Digest" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Das Digital Digest
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Data Engineering & Analytics
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Data Engineering & Analytics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Apache Airflow
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            Apache Airflow
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Airflow/index.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Airflow/1.0.0_AirFlow_Concepts.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Concepts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Airflow/1.0.1_A_Dags_Anatomy.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DAG Anatomy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Airflow/1.0.2_Hello_Airflow.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hello Airflow
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Airflow/1.0.3_Airflow_Dbt_Docker.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Airflow DBT Docker
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Spark & Databricks
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Spark & Databricks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Spark-DataBricks/index.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Spark-DataBricks/basics.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Basic Concepts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Spark-DataBricks/advanced.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Advanced Topics
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Stream Processing
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Stream Processing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../StreamProcessing/index.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    SQL
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            SQL
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../SQL/index.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../SQL/best-practices.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Best Practices
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../SQL/performance-tuning.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Performance Tuning
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Cloud & DevOps
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Cloud & DevOps
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Microsoft Fabric
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            Microsoft Fabric
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Microsoft-Fabric/index.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Azure Services
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Azure Services
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Synapse-ADF/synapse.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Synapse Analytics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Synapse-ADF/adf.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data Factory
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    DevOps
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            DevOps
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_3_1" id="__nav_3_3_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    GitHub Actions
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3_1">
            <span class="md-nav__icon md-icon"></span>
            GitHub Actions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../DevOps/1_GitHub-Concepts.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Concepts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../DevOps/1.1_Hello_GitHub_Actions_Workflow.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hello GitHub Actions
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_3_2" id="__nav_3_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Azure DevOps
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3_2">
            <span class="md-nav__icon md-icon"></span>
            Azure DevOps
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../DevOps/2_Azure-Pipelines.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Pipelines
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../DevOps/ADF_CICD.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ADF CI/CD
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Containers
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Containers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4_1" >
        
          
          <label class="md-nav__link" for="__nav_3_4_1" id="__nav_3_4_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Docker
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4_1">
            <span class="md-nav__icon md-icon"></span>
            Docker
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../DockerAndKubernetes/AirflowDocker/1_AirflowDocker.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Airflow on Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../DockerAndKubernetes/SparkHiveHadoop/4.9_DockerConcepts.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Concepts
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../DockerAndKubernetes/kubernetes/index.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kubernetes
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Enterprise Solutions
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Enterprise Solutions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Microsoft 365
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            Microsoft 365
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../M365/index.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../M365/sharepoint.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SharePoint
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Power Platform
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Power Platform
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../PowerPlatform/index.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../PowerPlatform/powerbi.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Power BI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../PowerPlatform/automate.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Power Automate
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    MongoDB
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            MongoDB
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../MongoDB/index.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../MongoDB/best-practices.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Best Practices
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Python
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            Python
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Python/index.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Python/data-processing.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data Processing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Python/automation.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Automation
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Projects
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Projects
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" >
        
          
          <label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Data Engineering
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1">
            <span class="md-nav__icon md-icon"></span>
            Data Engineering
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../index.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Sky Weather
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../CurrencyPredictor.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Currency Predictor
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../JsonValidator/index.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JSON Validator
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1_4" >
        
          
          <label class="md-nav__link" for="__nav_5_1_4" id="__nav_5_1_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ETL Projects
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1_4">
            <span class="md-nav__icon md-icon"></span>
            ETL Projects
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Csv-To-MSSQL.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CSV to MSSQL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../FetchJsonWriteParquet.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JSON to Parquet
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Dbrk-E2E-AttritionProject.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Databricks E2E Project
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Resources
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Resources
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Misc/6_RunningAppsInBg.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Miscellaneous
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../contributing.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../about.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      Table of Contents
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#project-azureskyweather-part-1a-using-azure-http-triggered-function" class="md-nav__link">
    <span class="md-ellipsis">
      Project AzureSkyWeather. Part 1A: Using Azure HTTP-Triggered Function
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Project AzureSkyWeather. Part 1A: Using Azure HTTP-Triggered Function">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#choice-of-azure-services-for-data-ingestion" class="md-nav__link">
    <span class="md-ellipsis">
      Choice of Azure Services For Data Ingestion
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lets-ready-the-prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Let's ready the prerequisites
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Let's ready the prerequisites">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#get-the-weather-api" class="md-nav__link">
    <span class="md-ellipsis">
      Get the Weather API
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set-up-azure-blobadlsg2-storage" class="md-nav__link">
    <span class="md-ellipsis">
      Set Up Azure Blob(ADLSG2) Storage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-the-azure-function-app" class="md-nav__link">
    <span class="md-ellipsis">
      Create the Azure Function App
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prepare-vs-code-and-local-enviroment-for-azure-function-development-and-testing" class="md-nav__link">
    <span class="md-ellipsis">
      Prepare VS Code and local enviroment for Azure Function Development and Testing
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Prepare VS Code and local enviroment for Azure Function Development and Testing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#azure-functions-extension-for-visual-studio-code" class="md-nav__link">
    <span class="md-ellipsis">
      Azure Functions Extension For Visual Studio Code
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#python-extension-for-visual-studio-code" class="md-nav__link">
    <span class="md-ellipsis">
      Python Extension for Visual Studio Code
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#azurite" class="md-nav__link">
    <span class="md-ellipsis">
      Azurite
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#azure-functions-sdk" class="md-nav__link">
    <span class="md-ellipsis">
      azure-functions SDK
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#azure-storage-blob-library-for-local-testing" class="md-nav__link">
    <span class="md-ellipsis">
      azure-storage-blob library for local testing
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#development-and-deploymment" class="md-nav__link">
    <span class="md-ellipsis">
      Development and Deploymment
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Development and Deploymment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-the-python-based-azure-function" class="md-nav__link">
    <span class="md-ellipsis">
      Create the Python-based Azure Function
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#write-our-custom-logic-in-the-azure-function" class="md-nav__link">
    <span class="md-ellipsis">
      Write our custom logic in the Azure Function
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#include-azure-storage-blob-in-requirementstxt" class="md-nav__link">
    <span class="md-ellipsis">
      Include azure-storage-blob in requirements.txt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-our-azure-function" class="md-nav__link">
    <span class="md-ellipsis">
      Test Our Azure Function
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-azure-function-app" class="md-nav__link">
    <span class="md-ellipsis">
      Create Azure Function App
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-the-azure-function-to-the-app" class="md-nav__link">
    <span class="md-ellipsis">
      Deploy the Azure Function To The App
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schedule-the-function-using-azure-logic-apps" class="md-nav__link">
    <span class="md-ellipsis">
      Schedule the Function using Azure Logic Apps
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-deployment-monitoring" class="md-nav__link">
    <span class="md-ellipsis">
      Post-deployment Monitoring
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common-errors" class="md-nav__link">
    <span class="md-ellipsis">
      Common Errors
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common Errors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#azurewebjobsstorage-app-setting-is-not-present" class="md-nav__link">
    <span class="md-ellipsis">
      "AzureWebJobsStorage" app setting is not present
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logic-apps-while-trying-to-add-azure-function-no-resources-of-this-type-found-under-this-subscription" class="md-nav__link">
    <span class="md-ellipsis">
      Logic Apps while trying to add azure function - No resources of this type found under this subscription
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logic-apps-job-shows-running-status-indefinately" class="md-nav__link">
    <span class="md-ellipsis">
      Logic Apps Job shows Running status indefinately
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#appendix" class="md-nav__link">
    <span class="md-ellipsis">
      Appendix
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Appendix">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#detailed-project-summary" class="md-nav__link">
    <span class="md-ellipsis">
      Detailed Project Summary
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#choice-of-storage-why-azure-data-lake" class="md-nav__link">
    <span class="md-ellipsis">
      Choice of storage. Why Azure Data Lake?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-an-azure-functions-app-using-azure-portal" class="md-nav__link">
    <span class="md-ellipsis">
      Creating an Azure Functions App Using Azure Portal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#azure-function-vs-code-project-folder-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Azure Function VS-Code Project Folder Structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structure-of-the-function-function_apppy" class="md-nav__link">
    <span class="md-ellipsis">
      Structure of the function function_app.py.
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#some-details-of-azure-functions-library" class="md-nav__link">
    <span class="md-ellipsis">
      Some details of azure-functions library
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#azurite-extension" class="md-nav__link">
    <span class="md-ellipsis">
      Azurite Extension
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#calculate-azure-logic-apps-cost" class="md-nav__link">
    <span class="md-ellipsis">
      Calculate Azure Logic Apps Cost
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h2 id="table-of-contents">Table of Contents<a class="headerlink" href="#table-of-contents" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="#project-azureskyweather-part-1a-using-azure-http-triggered-function">Project AzureSkyWeather. Part 1A: Using Azure HTTP-Triggered Function</a></li>
<li><a href="#overview">Overview</a></li>
<li><a href="#choice-of-azure-services-for-data-ingestion">Choice of Azure Services For Data Ingestion</a></li>
<li><a href="#lets-ready-the-prerequisites">Let's ready the prerequisites</a><ul>
<li><a href="#get-the-weather-api">Get the Weather API</a></li>
<li><a href="#set-up-azure-blobadlsg2-storage">Set Up Azure Blob(ADLSG2) Storage</a></li>
<li><a href="#create-the-azure-function-app">Create the Azure Function App</a></li>
<li><a href="#prepare-vs-code-and-local-enviroment-for-azure-function-development-and-testing">Prepare VS Code and local enviroment for Azure Function Development and Testing</a></li>
<li><a href="#azure-functions-extension-for-visual-studio-code">Azure Functions Extension For Visual Studio Code</a></li>
<li><a href="#python-extension-for-visual-studio-code">Python Extension for Visual Studio Code</a></li>
<li><a href="#azurite">Azurite</a></li>
<li><a href="#azure-functions-sdk">azure-functions SDK</a></li>
<li><a href="#azure-storage-blob-library-for-local-testing"><code>azure-storage-blob</code> library for local testing</a></li>
</ul>
</li>
<li><a href="#development-and-deploymment">Development and Deploymment</a><ul>
<li><a href="#create-the-python-based-azure-function">Create the Python-based Azure Function</a></li>
<li><a href="#write-our-custom-logic-in-the-azure-function">Write our custom logic in the Azure Function</a></li>
<li><a href="#include--azure-storage-blob-in-requirementstxt">Include  <code>azure-storage-blob</code> in requirements.txt</a></li>
<li><a href="#test-our-azure-function">Test Our Azure Function</a></li>
<li><a href="#create-azure-function-app">Create Azure Function App</a></li>
<li><a href="#deploy-the-azure-function-to-the-app">Deploy the Azure Function To The App</a></li>
<li><a href="#schedule-the-function-using-azure-logic-apps">Schedule the Function using Azure Logic Apps</a></li>
<li><a href="#post-deployment-monitoring">Post-deployment Monitoring</a></li>
</ul>
</li>
<li><a href="#common-errors">Common Errors</a><ul>
<li><a href="#azurewebjobsstorage-app-setting-is-not-present">"AzureWebJobsStorage" app setting is not present</a></li>
<li><a href="#logic-apps-while-trying-to-add-azure-function---no-resources-of-this-type-found-under-this-subscription">Logic Apps while trying to add azure function - No resources of this type found under this subscription</a></li>
<li><a href="#logic-apps-job-shows-running-status-indefinately">Logic Apps Job shows Running status indefinately</a></li>
</ul>
</li>
<li><a href="#appendix">Appendix</a><ul>
<li><a href="#detailed-project-summary">Detailed Project Summary</a></li>
<li><a href="#choice-of-storage-why-azure-data-lake">Choice of storage. Why Azure Data Lake?</a></li>
<li><a href="#creating-an-azure-functions-app-using-azure-portal">Creating an Azure Functions App Using Azure Portal</a></li>
<li><a href="#azure-function-vs-code-project-folder-structure">Azure Function VS-Code Project Folder Structure</a></li>
<li><a href="#structure-of-the-function-function_apppy">Structure of the function function_app.py.</a></li>
<li><a href="#some-details-of-azure-functions-library">Some details of <code>azure-functions</code> library</a></li>
<li><a href="#azurite-extension">Azurite Extension</a></li>
<li><a href="#calculate-azure-logic-apps-cost">Calculate Azure Logic Apps Cost</a></li>
</ul>
</li>
</ul>
<hr />
<h1 id="project-azureskyweather-part-1a-using-azure-http-triggered-function">Project AzureSkyWeather. Part 1A: Using Azure HTTP-Triggered Function<a class="headerlink" href="#project-azureskyweather-part-1a-using-azure-http-triggered-function" title="Permanent link">&para;</a></h1>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>In this project we use an  <strong>Azure HTTP Function</strong> to get the current <strong>weather data</strong> from <code>weatherapi.com</code>. Developed in <strong>Visual Studio Code</strong> using the <strong>Python V2 programming model</strong>, it stores data as hourly-named <strong>JSON files</strong> in <strong>Azure Data Lake</strong>. It's <strong>HTTP-triggered</strong>, with <strong>Azure Logic Apps</strong> managing the periodic fetch schedule. The function logs activities and handles errors, and if provided a 'name' in a request, it sends a <strong>personalized greeting</strong>. For a detailed overview, please see the <a href="#Comprehensive-Project-Summary">Comprehensive Project Summary</a> in the appendix.</p>
<h2 id="choice-of-azure-services-for-data-ingestion">Choice of Azure Services For Data Ingestion<a class="headerlink" href="#choice-of-azure-services-for-data-ingestion" title="Permanent link">&para;</a></h2>
<p>We developed the Azure Function in Visual Studio Code on Windows using the <strong>Python V2 programming model</strong>. The V2 model simplifies Azure Function app development by allowing scheduling, binding, and the entire logic to be written in a main Python file, contrasting with V1 which requires additional setup in a JSON file. We sourced our weather data from <strong>weatherapi.com</strong>, a cost-free option that doesn't require credit card and lets you call the api almost indefinately. HTTP-triggered functions need scheduling, unlike Timer-triggered ones. We managed this with Azure Logic Apps. In terms of cost, the Azure function with a Timer-trigger is the most economical, followed by the HTTP-Triggered Azure function paired with Azure Logic App-based scheduling. For a sample cost breakdown of the Logic App, please refer to the section <a href="#Calculate-Azure-Logic-Apps-Cost">Calculate Azure Logic Apps Cost</a>. Even so, for a simple hourly workflow, the expense remains minimal. It's worth noting that other options, especially Databricks, can be considerably pricier. Similarly, ADF and Synapse can also come at a higher cost. Here's a brief overview of the available options for creating an app like this:</p>
<ul>
<li>
<p><strong>Azure Functions (Python V2):</strong> These are ideal for small to moderate workloads and straightforward data retrieval tasks. Most of the logic is self-contained within the main Python file[V2 model], making it a cost-effective, easy-to-build choice.</p>
</li>
<li>
<p><strong>Azure Data Factory or Azure Databricks:</strong> For more complex workflows and efficient handling of larger data volumes, Azure Data Factory and Azure Databricks offer powerful options. However, they may incur higher operational costs due to their capabilities and scalability.</p>
</li>
<li>
<p><strong>Azure Logic Apps:</strong> Positioned between the other options, Azure Logic Apps are suitable for uncomplicated workflows with moderate data volumes, offering a visual workflow designer for easy setup. Their cost varies based on the number of steps. While here we use Azure Functions for core logic and Logic Apps for scheduling, some opt for a single solution, like a timer-triggered Azure App or fully utilizing an Azure Logic App.</p>
</li>
</ul>
<h2 id="lets-ready-the-prerequisites">Let's ready the prerequisites<a class="headerlink" href="#lets-ready-the-prerequisites" title="Permanent link">&para;</a></h2>
<h3 id="get-the-weather-api">Get the Weather API<a class="headerlink" href="#get-the-weather-api" title="Permanent link">&para;</a></h3>
<p>First, create an account at <a href="https://www.weatherapi.com/">weatherapi.com</a>. Then, navigate to <a href="https://www.weatherapi.com/my/">My Account</a>. Copy the API key and keep it handy for later use.</p>
<p><a class="glightbox" href="images\image.png" data-type="image" data-width="100%" data-height="auto" data-title="Alt text" data-desc-position="bottom"><img alt="Alt text" src="images\image.png" /></a></p>
<p>We chose <a href="https://www.weatherapi.com/">weatherapi.com</a> because it doesn't require sign-ups, and it offers most of the features we needed.
    <a class="glightbox" href="images\image-40.png" data-type="image" data-width="100%" data-height="auto" data-title="Alt text" data-desc-position="bottom"><img alt="Alt text" src="images\image-40.png" /></a></p>
<h3 id="set-up-azure-blobadlsg2-storage">Set Up Azure Blob(ADLSG2) Storage<a class="headerlink" href="#set-up-azure-blobadlsg2-storage" title="Permanent link">&para;</a></h3>
<p>In the Azure portal, create a resource group, a storage account, and a blob container named <code>weather-http</code>. This is where the Azure Function will store the .json weather files. I've omitted the detailed steps here to focus on the main process. Remember: <code>Enable Hierarchical Namespace</code>. This will turn your storage into a Data Lake.</p>
<h3 id="create-the-azure-function-app">Create the Azure Function App<a class="headerlink" href="#create-the-azure-function-app" title="Permanent link">&para;</a></h3>
<p>Azure Function App is a container for Azure Functions. It can be set up before or during the function deployment. I recommend deploying during development and creating a distinct Function App for each function to prevent overwriting. I will share 'run-time' deployment steps later in this tutorial.</p>
<p><a class="glightbox" href="images\image-62.png" data-type="image" data-width="100%" data-height="auto" data-title="Alt text" data-desc-position="bottom"><img alt="Alt text" src="images\image-62.png" /></a></p>
<blockquote>
<p>Sneak Peek: Deploying a Function App via VS Code.</p>
</blockquote>
<h3 id="prepare-vs-code-and-local-enviroment-for-azure-function-development-and-testing">Prepare VS Code and local enviroment for Azure Function Development and Testing<a class="headerlink" href="#prepare-vs-code-and-local-enviroment-for-azure-function-development-and-testing" title="Permanent link">&para;</a></h3>
<p>Install the following VS studio extensions:</p>
<h4 id="azure-functions-extension-for-visual-studio-code">Azure Functions Extension For Visual Studio Code<a class="headerlink" href="#azure-functions-extension-for-visual-studio-code" title="Permanent link">&para;</a></h4>
<p><a class="glightbox" href="images\image-16.png" data-type="image" data-width="100%" data-height="auto" data-title="Alt text" data-desc-position="bottom"><img alt="Alt text" src="images\image-16.png" /></a></p>
<h4 id="python-extension-for-visual-studio-code">Python Extension for Visual Studio Code<a class="headerlink" href="#python-extension-for-visual-studio-code" title="Permanent link">&para;</a></h4>
<p>Note: This is just the extension, not the actual Python interpreter. I assume you already have Python installed. For my work, I use the Conda distribution of Python.
<a class="glightbox" href="images\image-17.png" data-type="image" data-width="100%" data-height="auto" data-title="Alt text" data-desc-position="bottom"><img alt="Alt text" src="images\image-17.png" /></a></p>
<h4 id="azurite">Azurite<a class="headerlink" href="#azurite" title="Permanent link">&para;</a></h4>
<p><a class="glightbox" href="images\image-18.png" data-type="image" data-width="100%" data-height="auto" data-title="Alt text" data-desc-position="bottom"><img alt="Alt text" src="images\image-18.png" /></a></p>
<h4 id="azure-functions-sdk">azure-functions SDK<a class="headerlink" href="#azure-functions-sdk" title="Permanent link">&para;</a></h4>
<p>When testing our Azure Function locally, the system will look for the <code>azure-functions</code> SDK/package/library in the local system. This package must be present in the Python environment you're using; otherwise, you might encounter errors like: </p>
<p><a class="glightbox" href="images\image-13.png" data-type="image" data-width="100%" data-height="auto" data-title="Alt text" data-desc-position="bottom"><img alt="Alt text" src="images\image-13.png" /></a></p>
<p>As I use the Conda version of Python, I executed <code>pip install azure-functions</code> in the Anaconda prompt (with admin privileges).
<a class="glightbox" href="images\image-14.png" data-type="image" data-width="100%" data-height="auto" data-title="Alt text" data-desc-position="bottom"><img alt="Alt text" src="images\image-14.png" /></a></p>
<h4 id="azure-storage-blob-library-for-local-testing"><code>azure-storage-blob</code> library for local testing<a class="headerlink" href="#azure-storage-blob-library-for-local-testing" title="Permanent link">&para;</a></h4>
<p>As we are using Azure Blob Functions, we need to ensure that the Azure Blob Storage library/package/sdk is available during local testing . To install it locally using pip <code>install azure-storage-blob</code>.</p>
<h2 id="development-and-deploymment">Development and Deploymment<a class="headerlink" href="#development-and-deploymment" title="Permanent link">&para;</a></h2>
<h3 id="create-the-python-based-azure-function">Create the Python-based Azure Function<a class="headerlink" href="#create-the-python-based-azure-function" title="Permanent link">&para;</a></h3>
<p>To create an Azure Function in Visual Studio Code, follow these steps:</p>
<ul>
<li>Open Visual Studio Code and access the Azure icon in the Activity bar.</li>
<li>In the Workspace (local) area, click the thunder button, and select <strong>Create New Project</strong>.</li>
</ul>
<p><a class="glightbox" href="images\image-21.png" data-type="image" data-width="100%" data-height="auto" data-title="Alt text" data-desc-position="bottom"><img alt="Alt text" src="images\image-21.png" /></a></p>
<ul>
<li>Choose a local folder location for our project.</li>
</ul>
<p><a class="glightbox" href="images\image-41.png" data-type="image" data-width="100%" data-height="auto" data-title="Alt text" data-desc-position="bottom"><img alt="Alt text" src="images\image-41.png" /></a></p>
<ul>
<li>Select <strong>Python</strong> as the programming language.</li>
</ul>
<p><a class="glightbox" href="images\image-42.png" data-type="image" data-width="100%" data-height="auto" data-title="Alt text" data-desc-position="bottom"><img alt="Alt text" src="images\image-42.png" /></a></p>
<ul>
<li>Opt for <strong>Model V2</strong> as the programming model.</li>
</ul>
<p><a class="glightbox" href="images\image-43.png" data-type="image" data-width="100%" data-height="auto" data-title="Alt text" data-desc-position="bottom"><img alt="Alt text" src="images\image-43.png" /></a></p>
<ul>
<li>
<p>Choose the Python environment that you intend to use. Make sure to select the correct environment with all the required dependencies and packages e.g. Azure Functions.</p>
</li>
<li>
<p>Select <strong>HTTP trigger</strong></p>
</li>
</ul>
<p><a class="glightbox" href="images\image-63.png" data-type="image" data-width="100%" data-height="auto" data-title="Alt text" data-desc-position="bottom"><img alt="Alt text" src="images\image-63.png" /></a></p>
<ul>
<li>Provide a unique name for our function.</li>
</ul>
<p><a class="glightbox" href="images\image-45.png" data-type="image" data-width="100%" data-height="auto" data-title="Alt text" data-desc-position="bottom"><img alt="Alt text" src="images\image-45.png" /></a></p>
<ul>
<li>VS Code will generate a complete project structure, including all the necessary components for developing our function.</li>
</ul>
<p><a class="glightbox" href="images\image-66.png" data-type="image" data-width="100%" data-height="auto" data-title="Alt text" data-desc-position="bottom"><img alt="Alt text" src="images\image-66.png" /></a></p>
<h3 id="write-our-custom-logic-in-the-azure-function">Write our custom logic in the Azure Function<a class="headerlink" href="#write-our-custom-logic-in-the-azure-function" title="Permanent link">&para;</a></h3>
<p>Let's dive into our weather code! Replace <code>function_app.py</code> with the following. Remember to fill in <code>&lt;your_connection_string&gt;</code> and <code>&lt;weather_api_endpoint&gt;</code> with the actual details.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1"># Import necessary libraries and modules</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">logging</span><span class="o">,</span><span class="w"> </span><span class="nn">requests</span>  <span class="c1"># logging for log management, requests to make HTTP requests</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>  <span class="c1"># datetime for handling date and time operations</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="kn">import</span><span class="w"> </span><span class="nn">azure.functions</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">func</span>  <span class="c1"># Azure functions library</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="kn">from</span><span class="w"> </span><span class="nn">azure.storage.blob</span><span class="w"> </span><span class="kn">import</span> <span class="n">BlobServiceClient</span>  <span class="c1"># Azure blob storage client library</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="c1"># Set the authentication level for the Azure function</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="n">app</span> <span class="o">=</span> <span class="n">func</span><span class="o">.</span><span class="n">FunctionApp</span><span class="p">(</span><span class="n">http_auth_level</span><span class="o">=</span><span class="n">func</span><span class="o">.</span><span class="n">AuthLevel</span><span class="o">.</span><span class="n">FUNCTION</span><span class="p">)</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="c1"># Define the route for the Azure HTTP function</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="n">route</span><span class="o">=</span><span class="s2">&quot;FetchWeatherHTTP&quot;</span><span class="p">)</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="k">def</span><span class="w"> </span><span class="nf">FetchWeatherHTTP</span><span class="p">(</span><span class="n">req</span><span class="p">:</span> <span class="n">func</span><span class="o">.</span><span class="n">HttpRequest</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">func</span><span class="o">.</span><span class="n">HttpResponse</span><span class="p">:</span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>    <span class="c1"># Log that the function is being processed</span>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Python HTTP trigger function processed a request.&#39;</span><span class="p">)</span>
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>    <span class="c1"># Generate a filename for the weather data based on the current hour. This helps organize and retrieve data efficiently.</span>
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>    <span class="n">weatherFileName</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">-%H.json&quot;</span><span class="p">)</span>
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>
</span><span id="__span-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a>    <span class="c1"># Create a connection to Azure Blob Storage using the connection string</span>
</span><span id="__span-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a>    <span class="c1"># You can obtain the connection string from the Azure Portal: Storage Account -&gt; Access Keys -&gt; key1 -&gt; Connection String</span>
</span><span id="__span-0-21"><a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a>    <span class="n">connection_string</span> <span class="o">=</span> <span class="s2">&quot;&lt;your_connection_string&gt;&quot;</span>
</span><span id="__span-0-22"><a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a>    <span class="n">blob_service_client</span> <span class="o">=</span> <span class="n">BlobServiceClient</span><span class="o">.</span><span class="n">from_connection_string</span><span class="p">(</span><span class="n">connection_string</span><span class="p">)</span>
</span><span id="__span-0-23"><a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a>    <span class="n">blob_client</span> <span class="o">=</span> <span class="n">blob_service_client</span><span class="o">.</span><span class="n">get_blob_client</span><span class="p">(</span><span class="n">container</span><span class="o">=</span><span class="s2">&quot;weather-http&quot;</span><span class="p">,</span> <span class="n">blob</span><span class="o">=</span><span class="n">weatherFileName</span><span class="p">)</span>
</span><span id="__span-0-24"><a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a>
</span><span id="__span-0-25"><a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a>    <span class="c1"># Fetch weather data using the WeatherAPI endpoint. Replace &#39;YOUR_API_KEY&#39; with your actual API key and &#39;LOCATION&#39; with your desired location.</span>
</span><span id="__span-0-26"><a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a>    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;&lt;weather_api_endpoint&gt;&quot;</span><span class="p">)</span>
</span><span id="__span-0-27"><a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a>    <span class="c1"># Check if the data fetch was successful. If not, log an error and return a failure response.</span>
</span><span id="__span-0-28"><a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a>    <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
</span><span id="__span-0-29"><a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a>        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Failed to fetch weather data.&#39;</span><span class="p">)</span>
</span><span id="__span-0-30"><a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a>        <span class="k">return</span> <span class="n">func</span><span class="o">.</span><span class="n">HttpResponse</span><span class="p">(</span><span class="s2">&quot;Failed to fetch weather data.&quot;</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>
</span><span id="__span-0-31"><a id="__codelineno-0-31" name="__codelineno-0-31" href="#__codelineno-0-31"></a>
</span><span id="__span-0-32"><a id="__codelineno-0-32" name="__codelineno-0-32" href="#__codelineno-0-32"></a>    <span class="c1"># Parse the response content into JSON format</span>
</span><span id="__span-0-33"><a id="__codelineno-0-33" name="__codelineno-0-33" href="#__codelineno-0-33"></a>    <span class="n">data</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</span><span id="__span-0-34"><a id="__codelineno-0-34" name="__codelineno-0-34" href="#__codelineno-0-34"></a>
</span><span id="__span-0-35"><a id="__codelineno-0-35" name="__codelineno-0-35" href="#__codelineno-0-35"></a>    <span class="c1"># Try to store the fetched weather data into Azure Blob Storage.</span>
</span><span id="__span-0-36"><a id="__codelineno-0-36" name="__codelineno-0-36" href="#__codelineno-0-36"></a>    <span class="c1"># If there&#39;s an error (e.g., network issue, permission issue), it&#39;ll log the error and return a failure response.</span>
</span><span id="__span-0-37"><a id="__codelineno-0-37" name="__codelineno-0-37" href="#__codelineno-0-37"></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-0-38"><a id="__codelineno-0-38" name="__codelineno-0-38" href="#__codelineno-0-38"></a>        <span class="n">blob_client</span><span class="o">.</span><span class="n">upload_blob</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="__span-0-39"><a id="__codelineno-0-39" name="__codelineno-0-39" href="#__codelineno-0-39"></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-0-40"><a id="__codelineno-0-40" name="__codelineno-0-40" href="#__codelineno-0-40"></a>        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error uploading data to Blob Storage: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-0-41"><a id="__codelineno-0-41" name="__codelineno-0-41" href="#__codelineno-0-41"></a>        <span class="k">return</span> <span class="n">func</span><span class="o">.</span><span class="n">HttpResponse</span><span class="p">(</span><span class="s2">&quot;Error storing weather data.&quot;</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>
</span><span id="__span-0-42"><a id="__codelineno-0-42" name="__codelineno-0-42" href="#__codelineno-0-42"></a>
</span><span id="__span-0-43"><a id="__codelineno-0-43" name="__codelineno-0-43" href="#__codelineno-0-43"></a>    <span class="c1"># Check if there&#39;s a &#39;name&#39; parameter in the request.</span>
</span><span id="__span-0-44"><a id="__codelineno-0-44" name="__codelineno-0-44" href="#__codelineno-0-44"></a>    <span class="c1"># This is a feature that was initially scaffolded by VS Code to demonstrate how to handle request parameters.</span>
</span><span id="__span-0-45"><a id="__codelineno-0-45" name="__codelineno-0-45" href="#__codelineno-0-45"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>
</span><span id="__span-0-46"><a id="__codelineno-0-46" name="__codelineno-0-46" href="#__codelineno-0-46"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">name</span><span class="p">:</span>
</span><span id="__span-0-47"><a id="__codelineno-0-47" name="__codelineno-0-47" href="#__codelineno-0-47"></a>        <span class="c1"># If &#39;name&#39; isn&#39;t in the request&#39;s parameters, check the request body.</span>
</span><span id="__span-0-48"><a id="__codelineno-0-48" name="__codelineno-0-48" href="#__codelineno-0-48"></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-0-49"><a id="__codelineno-0-49" name="__codelineno-0-49" href="#__codelineno-0-49"></a>            <span class="n">req_body</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="n">get_json</span><span class="p">()</span>
</span><span id="__span-0-50"><a id="__codelineno-0-50" name="__codelineno-0-50" href="#__codelineno-0-50"></a>        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
</span><span id="__span-0-51"><a id="__codelineno-0-51" name="__codelineno-0-51" href="#__codelineno-0-51"></a>            <span class="k">pass</span>
</span><span id="__span-0-52"><a id="__codelineno-0-52" name="__codelineno-0-52" href="#__codelineno-0-52"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-0-53"><a id="__codelineno-0-53" name="__codelineno-0-53" href="#__codelineno-0-53"></a>            <span class="n">name</span> <span class="o">=</span> <span class="n">req_body</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>
</span><span id="__span-0-54"><a id="__codelineno-0-54" name="__codelineno-0-54" href="#__codelineno-0-54"></a>
</span><span id="__span-0-55"><a id="__codelineno-0-55" name="__codelineno-0-55" href="#__codelineno-0-55"></a>    <span class="c1"># If a name is provided, return a personalized greeting.</span>
</span><span id="__span-0-56"><a id="__codelineno-0-56" name="__codelineno-0-56" href="#__codelineno-0-56"></a>    <span class="c1"># If not, return a generic success message.</span>
</span><span id="__span-0-57"><a id="__codelineno-0-57" name="__codelineno-0-57" href="#__codelineno-0-57"></a>    <span class="k">if</span> <span class="n">name</span><span class="p">:</span>
</span><span id="__span-0-58"><a id="__codelineno-0-58" name="__codelineno-0-58" href="#__codelineno-0-58"></a>        <span class="k">return</span> <span class="n">func</span><span class="o">.</span><span class="n">HttpResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Hello, </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">. Weather data fetched and stored successfully.&quot;</span><span class="p">)</span>
</span><span id="__span-0-59"><a id="__codelineno-0-59" name="__codelineno-0-59" href="#__codelineno-0-59"></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="__span-0-60"><a id="__codelineno-0-60" name="__codelineno-0-60" href="#__codelineno-0-60"></a>        <span class="k">return</span> <span class="n">func</span><span class="o">.</span><span class="n">HttpResponse</span><span class="p">(</span>
</span><span id="__span-0-61"><a id="__codelineno-0-61" name="__codelineno-0-61" href="#__codelineno-0-61"></a>             <span class="s2">&quot;Weather data fetched and stored successfully. Pass a name in the query string or in the request body for a personalized response.&quot;</span><span class="p">,</span>
</span><span id="__span-0-62"><a id="__codelineno-0-62" name="__codelineno-0-62" href="#__codelineno-0-62"></a>             <span class="n">status_code</span><span class="o">=</span><span class="mi">200</span>
</span><span id="__span-0-63"><a id="__codelineno-0-63" name="__codelineno-0-63" href="#__codelineno-0-63"></a>        <span class="p">)</span>
</span></code></pre></div>
<h3 id="include-azure-storage-blob-in-requirementstxt">Include  <code>azure-storage-blob</code> in requirements.txt<a class="headerlink" href="#include-azure-storage-blob-in-requirementstxt" title="Permanent link">&para;</a></h3>
<p>We've wrapped up the main coding. Now, just add <code>azure-storage-blob</code> to <code>requirements.txt</code> to instruct the deployment to install the library in Azure.</p>
<p><a class="glightbox" href="images\image-50.png" data-type="image" data-width="100%" data-height="auto" data-title="Alt text" data-desc-position="bottom"><img alt="Alt text" src="images\image-50.png" /></a></p>
<h3 id="test-our-azure-function">Test Our Azure Function<a class="headerlink" href="#test-our-azure-function" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>It's time to test our Azure Function. Follow these steps:</p>
</li>
<li>
<p>Open Visual Studio Code and press <code>Ctrl+Shift+P</code>. Select <strong>Azurite: Start</strong>.</p>
<p><a class="glightbox" href="images\image-22.png" data-type="image" data-width="100%" data-height="auto" data-title="Alt text" data-desc-position="bottom"><img alt="Alt text" src="images\image-22.png" /></a></p>
<p>This action starts the Azurite Blob Service. You can check the status at the bottom right corner of VS Code, where you should see something like this:</p>
<p><a class="glightbox" href="images\image-51.png" data-type="image" data-width="100%" data-height="auto" data-title="Alt text" data-desc-position="bottom"><img alt="Alt text" src="images\image-51.png" /></a></p>
</li>
<li>
<p>Start debugging by pressing <code>F5</code>. Then, on the left, click the Azure icon. Navigate to the workspace and locate our function (refresh if needed). Right-click the function and select <strong>Execute</strong>.</p>
<p><a class="glightbox" href="images\image-52.png" data-type="image" data-width="100%" data-height="auto" data-title="Alt text" data-desc-position="bottom"><img alt="Alt text" src="images\image-52.png" /></a></p>
</li>
<li>
<p>If the execution is successful, you'll see an output similar to this:</p>
<p><a class="glightbox" href="images\image-53.png" data-type="image" data-width="100%" data-height="auto" data-title="Alt text" data-desc-position="bottom"><img alt="Alt text" src="images\image-53.png" /></a></p>
<p>Additionally, a JSON file will be created in our container:</p>
<p><a class="glightbox" href="images\image-54.png" data-type="image" data-width="100%" data-height="auto" data-title="Alt text" data-desc-position="bottom"><img alt="Alt text" src="images\image-54.png" /></a></p>
</li>
</ul>
<h3 id="create-azure-function-app">Create Azure Function App<a class="headerlink" href="#create-azure-function-app" title="Permanent link">&para;</a></h3>
<p>For Azure Functions, we need a Function App—a container for them. Instead of setting this up on the Azure Portal, I like using Visual Studio Code for its simplicity during initial deployment. Here's how to set it up with VS Code:</p>
<ul>
<li><strong>Launch Setup in Visual Studio</strong>:</li>
<li>Click the Azure icon, then select the thunder icon in the workspace.</li>
<li>Choose <code>Create Function app in Azure..(Advanced)</code>.
  <a class="glightbox" href="images\image-73.png" data-type="image" data-width="100%" data-height="auto" data-title="Alt text" data-desc-position="bottom"><img alt="Alt text" src="images\image-73.png" /></a></li>
<li>
<p><strong>Comment</strong>: The icon might not always be visible; ensure your project is 'loaded' properly.</p>
</li>
<li>
<p><strong>Name Your Function App</strong>:</p>
</li>
<li>
<p>Assign a unique name to your function app.
  <a class="glightbox" href="images\image-67.png" data-type="image" data-width="100%" data-height="auto" data-title="Alt text" data-desc-position="bottom"><img alt="Alt text" src="images\image-67.png" /></a></p>
</li>
<li>
<p><strong>Select the Right Runtime</strong>:</p>
</li>
<li>
<p>If you're working on an Azure Function in Python, ensure you set the runtime environment to Python.
  <a class="glightbox" href="images\image-68.png" data-type="image" data-width="100%" data-height="auto" data-title="Alt text" data-desc-position="bottom"><img alt="Alt text" src="images\image-68.png" /></a></p>
</li>
<li>
<p><strong>Configure the resource group</strong>:</p>
</li>
<li>
<p>Decide on using an existing resource group or create a new one. Ensure consistency in the chosen region.
  <a class="glightbox" href="images\image-69.png" data-type="image" data-width="100%" data-height="auto" data-title="Alt text" data-desc-position="bottom"><img alt="Alt text" src="images\image-69.png" /></a></p>
</li>
<li>
<p><strong>Choose the hosting Plan</strong>:</p>
</li>
<li>Carefully select the hosting plan. If you're budget-conscious, consider the Consumption-based plan. 
  <a class="glightbox" href="images\image-70.png" data-type="image" data-width="100%" data-height="auto" data-title="Alt text" data-desc-position="bottom"><img alt="Alt text" src="images\image-70.png" /></a></li>
<li><strong>Comment</strong>: Based on my experience, running our current project, 24 executions for around seven days costed me few dollars. But, you case cuold be different. Overall, I found </li>
<li><strong>Choose Storage account</strong>:</li>
<li>
<p>Allocate a storage account for the Azure Function App. Using separate storage accounts for each function app simplifies the structure.
  <a class="glightbox" href="images\image-72.png" data-type="image" data-width="100%" data-height="auto" data-title="Alt text" data-desc-position="bottom"><img alt="Alt text" src="images\image-72.png" /></a></p>
</li>
<li>
<p><strong>Opt for Enhanced Monitoring</strong>:</p>
</li>
<li>Incorporate an Application Insights resource for detailed insights and improved monitoring.</li>
</ul>
<p>After these steps, your Azure Function App is set up. The next phase involves deploying your Azure Function to this newly created app.</p>
<h3 id="deploy-the-azure-function-to-the-app">Deploy the Azure Function To The App<a class="headerlink" href="#deploy-the-azure-function-to-the-app" title="Permanent link">&para;</a></h3>
<ul>
<li>The deployment process is straightforward. In the workspace, click the thunder icon and choose <strong>Deploy to Function App</strong>.</li>
</ul>
<p><a class="glightbox" href="images\image-55.png" data-type="image" data-width="100%" data-height="auto" data-title="Alt text" data-desc-position="bottom"><img alt="Alt text" src="images\image-55.png" /></a></p>
<ul>
<li>Visual Studio Code will display the Function App where you can deploy our Azure Function. Select the Function App.</li>
</ul>
<p><a class="glightbox" href="images\image-56.png" data-type="image" data-width="100%" data-height="auto" data-title="Alt text" data-desc-position="bottom"><img alt="Alt text" src="images\image-56.png" /></a></p>
<ul>
<li>Click <strong>Deploy</strong></li>
</ul>
<p><a class="glightbox" href="images\image-57.png" data-type="image" data-width="100%" data-height="auto" data-title="Alt text" data-desc-position="bottom"><img alt="Alt text" src="images\image-57.png" /></a></p>
<p>Note: This will overwrite ANY function present in the Azure Func app.</p>
<ul>
<li>After successful deployment, you will see output like the following in the console:</li>
</ul>
<p><a class="glightbox" href="images\image-58.png" data-type="image" data-width="100%" data-height="auto" data-title="Alt text" data-desc-position="bottom"><img alt="Alt text" src="images\image-58.png" /></a></p>
<ul>
<li>And you can see the Function inside the Azure Function App:</li>
</ul>
<p><a class="glightbox" href="images\image-59.png" data-type="image" data-width="100%" data-height="auto" data-title="Alt text" data-desc-position="bottom"><img alt="Alt text" src="images\image-59.png" /></a></p>
<h3 id="schedule-the-function-using-azure-logic-apps">Schedule the Function using Azure Logic Apps<a class="headerlink" href="#schedule-the-function-using-azure-logic-apps" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Create a Logic App in the Azure Portal</strong> and name it <code>Anything-Meaningful-Haha</code>.</li>
<li><strong>Go to the Logic App Designer</strong> to design your workflow.</li>
<li>Search for "Recurrence" and add this step.</li>
<li>For the "Interval", enter "1". For "Frequency", select "Hour". Choose your time zone. Leave the "Start time" empty.</li>
<li>
<p><strong>Next, add an action.</strong> This step is crucial. We have two options: HTTP Action and HTTP Webhook Action. For this scenario, choose the <strong>HTTP Action</strong>. Here's why: </p>
</li>
<li>
<p><strong>HTTP Action</strong>:</p>
<ul>
<li>Use this when you simply want to call an HTTP endpoint (in your case, the Azure Function) without waiting for a prolonged period or any kind of asynchronous processing.</li>
<li>The Logic App will receive the immediate response from the Azure Function and then proceed to the next action or finish the workflow.</li>
</ul>
</li>
<li>
<p><strong>HTTP Webhook Action</strong>:</p>
<ul>
<li>Use this when there's a need to wait for an asynchronous process to complete before moving on in the Logic App workflow. The Logic App will pause until it receives a "callback" from the endpoint, signaling that the task is done.</li>
<li>More complex and often used in scenarios where there might be a long delay or wait time between triggering an action and its completion.</li>
</ul>
</li>
</ul>
<p>For our scenario, the <strong>HTTP Action</strong> is a simpler and more suitable choice. It will trigger the Azure Function, and once the Function responds (which it does after fetching and storing the weather data), the Logic App will consider the action completed. There is no need to wait for the Azure Function to complete its task and send a callback. Here is a real-world example of the output from choosing each scenario:</p>
<p><a class="glightbox" href="images\image-65.png" data-type="image" data-width="100%" data-height="auto" data-title="Alt text" data-desc-position="bottom"><img alt="Alt text" src="images\image-65.png" /></a></p>
<ul>
<li>
<p><strong>In the HTTP Action</strong>, provide the <strong>URI</strong> and <strong>Method</strong> as GET. To obtain the URI from our Azure HTTP-Triggered Function, follow these steps:</p>
</li>
<li>
<p><strong>Open the Azure App</strong> hosting the Azure Function. </p>
</li>
<li><strong>Click the Azure Function</strong>, navigate to <strong>Overview</strong>, then at the top, click <strong>Get Function URL</strong> and copy the URL.</li>
</ul>
<p><strong>The workflow creation is complete</strong>. Save the workflow and wait for the next hour.</p>
<p>In the <strong>Overview section</strong> of the Logic App, under <strong>Runs history</strong>, check the runs to see if the desired action (in our case, the creation of the weather JSON in the blob storage) is being performed.</p>
<h3 id="post-deployment-monitoring">Post-deployment Monitoring<a class="headerlink" href="#post-deployment-monitoring" title="Permanent link">&para;</a></h3>
<p>The purpose of this http-triggered logic-app scheduled Azure Function is to periodically fetch weather data and store it as a JSON file in an Azure Blob container. After deploying the function, you can monitor its performance and analyze invocations by following these steps:</p>
<ul>
<li>Open the Azure Function in the Azure portal.</li>
</ul>
<p><a class="glightbox" href="images\image-60.png" data-type="image" data-width="100%" data-height="auto" data-title="Alt text" data-desc-position="bottom"><img alt="Alt text" src="images\image-60.png" /></a></p>
<ul>
<li>
<p>Go to the "Monitor" section to access detailed information about function invocations.</p>
</li>
<li>
<p>Check the Azure Blob container to verify if the JSON files are being created as expected.</p>
</li>
</ul>
<h2 id="common-errors">Common Errors<a class="headerlink" href="#common-errors" title="Permanent link">&para;</a></h2>
<h3 id="azurewebjobsstorage-app-setting-is-not-present">"AzureWebJobsStorage" app setting is not present<a class="headerlink" href="#azurewebjobsstorage-app-setting-is-not-present" title="Permanent link">&para;</a></h3>
<p><a class="glightbox" href="images\image-36.png" data-type="image" data-width="100%" data-height="auto" data-title="Alt text" data-desc-position="bottom"><img alt="Alt text" src="images\image-36.png" /></a></p>
<p>The "AzureWebJobsStorage" app setting error indicates that our Azure Functions app is missing a crucial configuration related to the storage account connection string. This could also be realted to the following deployment failure message</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="m">12</span>:23:58<span class="w"> </span>PM<span class="w"> </span>FetchWeatherAzFunc:<span class="w"> </span>Deployment<span class="w"> </span>Log<span class="w"> </span>file<span class="w"> </span>does<span class="w"> </span>not<span class="w"> </span>exist<span class="w"> </span><span class="k">in</span><span class="w"> </span>/tmp/oryx-build.log
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="m">12</span>:23:58<span class="w"> </span>PM<span class="w"> </span>FetchWeatherAzFunc:<span class="w"> </span>The<span class="w"> </span>logfile<span class="w"> </span>at<span class="w"> </span>/tmp/oryx-build.log<span class="w"> </span>is<span class="w"> </span>empty.<span class="w"> </span>Unable<span class="w"> </span>to<span class="w"> </span>fetch<span class="w"> </span>the<span class="w"> </span>summary<span class="w"> </span>of<span class="w"> </span>build
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="m">12</span>:23:58<span class="w"> </span>PM<span class="w"> </span>FetchWeatherAzFunc:<span class="w"> </span>Deployment<span class="w"> </span>Failed.<span class="w"> </span><span class="nv">deployer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>ms-azuretools-vscode<span class="w"> </span><span class="nv">deploymentPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>Functions<span class="w"> </span>App<span class="w"> </span>ZipDeploy.<span class="w"> </span>Extract<span class="w"> </span>zip.<span class="w"> </span>Remote<span class="w"> </span>build.
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="m">12</span>:24:00<span class="w"> </span>PM<span class="w"> </span>FetchWeatherAzFunc:<span class="w"> </span>Deployment<span class="w"> </span>failed.
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="m">12</span>:35:57<span class="w"> </span>PM<span class="w"> </span>FetchWeatherAzFunc:<span class="w"> </span>Starting<span class="w"> </span>deployment.
</span></code></pre></div>
<p><strong>To resolve this:</strong></p>
<ul>
<li>
<p><strong>Create or Identify a Storage Account</strong>: If you don't already have an Azure Storage account, create one in the same region as our function app.</p>
</li>
<li>
<p><strong>Get the Storage Account Connection String</strong>: Navigate to the Azure Storage account in the Azure Portal. Under the "Settings" section, click on "Access keys." Here, you'll find two keys (key1 and key2) each with a connection string. You can use either of these connection strings for the next step.</p>
</li>
<li>
<p><strong>Update Function App Settings</strong>:</p>
</li>
<li>Navigate to our Azure Functions app in the Azure Portal.</li>
<li>Under the "Settings" section, click on "Configuration."</li>
<li>In the "Application settings" tab, locate or create the <code>AzureWebJobsStorage</code> setting.</li>
<li>Add the setting:<ul>
<li>Name: <code>AzureWebJobsStorage</code></li>
<li>Value: [our Azure Storage Account connection string from step 2]</li>
</ul>
</li>
<li>
<p>Click "OK" or "Save" to add the setting and save our changes on the main configuration page.</p>
</li>
<li>
<p><strong>Restart our Function App</strong>: After adding the necessary setting, restart our function app for the changes to take effect.</p>
</li>
</ul>
<p>Following these steps will resolve the error related to the "AzureWebJobsStorage" app setting.</p>
<h3 id="logic-apps-while-trying-to-add-azure-function-no-resources-of-this-type-found-under-this-subscription">Logic Apps while trying to add azure function - No resources of this type found under this subscription<a class="headerlink" href="#logic-apps-while-trying-to-add-azure-function-no-resources-of-this-type-found-under-this-subscription" title="Permanent link">&para;</a></h3>
<p>Ideally, if you want to add an Azure Function to a Logic App, it should appear like this:</p>
<p><a class="glightbox" href="images\image-37.png" data-type="image" data-width="100%" data-height="auto" data-title="Alt text" data-desc-position="bottom"><img alt="Alt text" src="images\image-37.png" /></a></p>
<p>However, sometimes you may encounter the main Azure App, but not the bespoke function you created. Instead, you might see an error message such as "No resources of this type found under this subscription." One of the reason for this could be realted to the storage account which the Azure Function uses. There could be other reason's too like the different regions. </p>
<h3 id="logic-apps-job-shows-running-status-indefinately">Logic Apps Job shows Running status indefinately<a class="headerlink" href="#logic-apps-job-shows-running-status-indefinately" title="Permanent link">&para;</a></h3>
<p>If your Logic App consistently displays a "Running" status for a prolonged duration, several factors might be at play. A common cause is when an HTTP Webhook action is used; the Logic App waits for the webhook's response. It's crucial to verify that the webhook returns a response. Otherwise, the Logic App's status remains "Running" until a timeout or until a response is received.</p>
<p><a class="glightbox" href="images\image-64.png" data-type="image" data-width="100%" data-height="auto" data-title="Alt text" data-desc-position="bottom"><img alt="Alt text" src="images\image-64.png" /></a></p>
<p>A solution is to use a straightforward <code>HTTP action</code>. In this method, the step won't await any response; it marks itself as successful upon receiving an output.</p>
<h2 id="appendix">Appendix<a class="headerlink" href="#appendix" title="Permanent link">&para;</a></h2>
<h3 id="detailed-project-summary">Detailed Project Summary<a class="headerlink" href="#detailed-project-summary" title="Permanent link">&para;</a></h3>
<p>In the 'Overview' and 'Solutions Summary Approach' sections, I've sketched out a basic outline of our project. To dive deeper into the details, refer to the content below</p>
<p><strong>Objective</strong></p>
<p>The objective of the Azure function is to fetch current weather data periodically and store it efficiently for later use.</p>
<p><strong>Deployment and Environment:</strong> 
   - The function is developed using Visual Studio Code on Windows.
   - It utilizes the Python V2 programming model for Azure Functions, simplifying the development process.</p>
<p><strong>Data Retrieval:</strong> 
   - The function sources weather data from <code>weatherapi.com</code>.
   - It fetches current weather information without the need for credit card details, with data availability spanning up to 15 days.</p>
<p><strong>Data Storage:</strong> 
   - Weather data is saved as JSON files in an Azure Blob Storage container.
   - Filenames are generated based on the current hour, ensuring organized and chronological storage of data. </p>
<p><strong>Trigger Mechanism:</strong>
   - This Azure Function is HTTP-triggered, requiring external scheduling.
   - The scheduling is managed through Azure Logic Apps, allowing for regular, automated data retrieval.</p>
<p><strong>Error Handling and Logging:</strong> 
   - The function contains robust logging, capturing both successful data retrievals and potential issues.
   - It has mechanisms in place to handle errors, especially when fetching data from the API or while uploading to Blob Storage.</p>
<p><strong>Response Mechanism:</strong>
   - Beyond its primary data retrieval and storage task, the function can provide a personalized greeting if a 'name' parameter is passed in the request.</p>
<h3 id="choice-of-storage-why-azure-data-lake">Choice of storage. Why Azure Data Lake?<a class="headerlink" href="#choice-of-storage-why-azure-data-lake" title="Permanent link">&para;</a></h3>
<p>We've selected Azure Data Lake Storage Gen2 (ADLS G2) for storing our weather data. This decision was largely driven by its seamless integration with Azure Functions, which streamlines our data collection process. Apart form this ADLS G2 also has many other advantages, like:</p>
<ul>
<li>
<p><strong>Hierarchical Organization</strong>: ADLS G2 allows us to neatly structure our data, similar to a directory system. We can store our weather data grouped by year, month day etc.</p>
</li>
<li>
<p><strong>Enhanced Security</strong>: The Active Directory permission can be applied to the folders and files. This makes the storage as secure as it can get.</p>
</li>
<li>
<p><strong>Analytics Performance</strong>: ADLS G2 is optimized for heavy-duty data analytics, ensuring efficient query operations over vast datasets.</p>
</li>
</ul>
<p>In the next stage, we decided to convert our JSON-formatted data into Parquet. Here's why:</p>
<ul>
<li>
<p><strong>Analytical Efficiency</strong>: Parquet, with its columnar storage design, streamlines analytical queries, letting us access specific data without scanning the entire dataset.</p>
</li>
<li>
<p><strong>Storage Efficiency</strong>: Parquet compresses data effectively, optimizing storage use and potentially lowering costs.</p>
</li>
<li>
<p><strong>Adaptable Structure</strong>: Parquet inherently carries schema information, allowing for alterations in data structure without disrupting existing data.</p>
</li>
</ul>
<p>A noteworthy advantage of Parquet is its compatibility with various storage systems, including NoSQL databases, data warehouses, and lakehouses. This ensures that we can migrate or integrate our data effortlessly if our analytical demands change.</p>
<p>To summarize, our storage strategy not only prepares our data for immediate analysis but we can also easily move it to other storage solution in future.</p>
<h3 id="creating-an-azure-functions-app-using-azure-portal">Creating an Azure Functions App Using Azure Portal<a class="headerlink" href="#creating-an-azure-functions-app-using-azure-portal" title="Permanent link">&para;</a></h3>
<p>An Azure Functions App acts as a host for one or more Azure Functions. In essence, while an individual Azure Function is a piece of code that runs in response to an event, the Function App serves as the hosting and management unit for that function (or multiple functions).</p>
<ul>
<li>To create an Azure Function, click "Create" under "Function App".
<a class="glightbox" href="images\image-2.png" data-type="image" data-width="100%" data-height="auto" data-title="Alt text" data-desc-position="bottom"><img alt="Alt text" src="images\image-2.png" /></a></li>
<li>Fill in the required details, including Subscription, Resource Group, Function App name, etc. For the runtime, choose Python. Click "Review + create" and then "Create".
<a class="glightbox" href="images\image-3.png" data-type="image" data-width="100%" data-height="auto" data-title="Alt text" data-desc-position="bottom"><img alt="Alt text" src="images\image-3.png" /></a></li>
</ul>
<h3 id="azure-function-vs-code-project-folder-structure">Azure Function VS-Code Project Folder Structure<a class="headerlink" href="#azure-function-vs-code-project-folder-structure" title="Permanent link">&para;</a></h3>
<p>Visual Studio Creates the following project structure for Azure Functions Project:</p>
<p><a class="glightbox" href="images\image-61.png" data-type="image" data-width="100%" data-height="auto" data-title="Alt text" data-desc-position="bottom"><img alt="Alt text" src="images\image-61.png" /></a></p>
<p>The main Project Folder <strong><project_root></strong> Contents:</p>
<ul>
<li>.venv/: (Optional) Python virtual environment for local development.</li>
<li>.vscode/: (Optional) Visual Studio Code configuration.</li>
<li>function_app.py: Main entry point. Default location for functions, triggers, and bindings.</li>
<li>additional_functions.py: (Optional) Additional Python files for logical grouping and reference in function_app.py.</li>
<li>tests/: (Optional) Test cases for our function app.</li>
<li>.funcignore: (Optional) Declares files not to be published to Azure, often including .vscode/ for editor settings, .venv/ for local Python virtual environment, tests/ for test cases, and local.settings.json to prevent local app settings from being published.</li>
<li>host.json: Contains configuration options affecting all functions in a function app. Gets published to Azure.</li>
<li>local.settings.json: Stores app settings and connection strings for local development, not published to Azure.</li>
<li>requirements.txt: Lists Python packages installed when publishing to Azure.</li>
<li>Dockerfile: (Optional) Used for custom container publishing.</li>
</ul>
<h3 id="structure-of-the-function-function_apppy">Structure of the function function_app.py.<a class="headerlink" href="#structure-of-the-function-function_apppy" title="Permanent link">&para;</a></h3>
<p>The <code>function_app.py</code> file is the key entry point. It resides at the root directory and serves as a Python script containing the definitions of the functions within the Function App.</p>
<p>Each function defined in <code>function_app.py</code> must specify several crucial elements:</p>
<ul>
<li><strong>Function Name</strong>: It should have a unique and descriptive name.</li>
<li><strong>Function Trigger</strong>: This defines what activates the function. For example, it could be triggered by an HTTP request or based on a timer schedule.</li>
<li><strong>Function Code</strong>: This is where you place the actual logic for the function.</li>
</ul>
<p><a class="glightbox" href="images\image-12.png" data-type="image" data-width="100%" data-height="auto" data-title="Alt text" data-desc-position="bottom"><img alt="Alt text" src="images\image-12.png" /></a></p>
<p>Note, that the structure of <code>function_app.py</code> varies a little bit based on the type of trigger used. E.g., when creating a Timer-triggered function, a specific template code is generated VS Code. </p>
<h3 id="some-details-of-azure-functions-library">Some details of <code>azure-functions</code> library<a class="headerlink" href="#some-details-of-azure-functions-library" title="Permanent link">&para;</a></h3>
<p>The command <code>pip install azure-functions</code> adds the Azure Functions SDK to your Python environment. This SDK facilitates local development, testing, and execution of Azure Functions. It includes tools that allow functions to interact with Azure and other services, such as responding to an HTTP request or storing data in Azure Blob Storage. </p>
<h3 id="azurite-extension">Azurite Extension<a class="headerlink" href="#azurite-extension" title="Permanent link">&para;</a></h3>
<p>Azurite is mainly used for local development and testing of applications that interact with Azure Storage services. It provides an emulation of Azure Storage services, including Blob, Queue, and Table services, in a local environment. </p>
<p>(CTRL+SHIFT+P)"Azurite: Start" is a command that starts the Azurite server for local debugging etc. After that you typically use F5 to start debugging.</p>
<h3 id="calculate-azure-logic-apps-cost">Calculate Azure Logic Apps Cost<a class="headerlink" href="#calculate-azure-logic-apps-cost" title="Permanent link">&para;</a></h3>
<p>Azure Logic Apps pricing primarily hinges on the total executions and the combined action and connector executions. To illustrate, for an hourly-triggered Azure Function:</p>
<ul>
<li>The Logic App runs hourly, translating to 24 daily executions.</li>
<li>Every execution typically involves at least two action/connector executions: one for the recurring hourly trigger and another for invoking the Azure Function.</li>
</ul>
<p>Considering rates of approximately $0.000025 per execution and $0.000125 per action or connector execution (though rates can differ based on the region or Microsoft's adjustments):</p>
<p><code>Estimated Monthly Cost = 24 x 30 x (0.000025 + 2 x 0.000125) ≈ $0.198</code></p>
<p>So, running this Azure Logic App with an hourly trigger might cost about 20 cents monthly. Yet, it's crucial to:</p>
<ul>
<li>I wrote this article in 2022. So, confirm current prices on the <a href="https://azure.microsoft.com/en-us/pricing/details/logic-apps/">Azure Logic Apps pricing page</a>.</li>
<li>Use Azure's monitoring tools to observe your actual costs.</li>
<li>Remember Azure's Logic Apps free tier, which offers a set number of free runs and actions monthly, potentially lowering costs if you stay within these free tier boundaries.</li>
</ul>
<p>Overall, for straightforward hourly triggers, Azure Logic Apps offer an affordable solution to schedule tasks without added coding.</p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 - Das
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../../..", "features": ["navigation.top", "search.suggest", "search.highlight", "content.code.copy"], "search": "../../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.f1b6f286.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>